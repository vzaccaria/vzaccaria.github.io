<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<title>Introduction to Javascript for Mobile Web Development</title>
<meta name="author" content="(Vittorio Zaccaria)"/>
<style type="text/css">
.underline { text-decoration: underline; }
</style>
<link rel="stylesheet" href="http://cdn.jsdelivr.net/reveal.js/3.0.0/css/reveal.css"/>

<link rel="stylesheet" href="http://cdn.jsdelivr.net/reveal.js/3.0.0/css/theme/moon.css" id="theme"/>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/solarized-light.min.css"/>
<!-- If the query includes 'print-pdf', include the PDF print sheet -->
<script>
    if( window.location.search.match( /print-pdf/gi ) ) {
        var link = document.createElement( 'link' );
        link.rel = 'stylesheet';
        link.type = 'text/css';
        link.href = 'http://cdn.jsdelivr.net/reveal.js/3.0.0/css/print/pdf.css';
        document.getElementsByTagName( 'head' )[0].appendChild( link );
    }
</script>
<script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
</head>
<body>
<div class="reveal">
<div class="slides">
<section id="sec-title-slide"><h1 class="title">Introduction to Javascript for Mobile Web Development</h1><h2 class="author">Vittorio Zaccaria</h2><h2 class="date">vittorio.zaccaria@polimi.it - Politecnico di Milano</h2><p class="date">Created: 2018-02-15 Thu 18:27</p>
</section>

<style type="text/less">
@background-color: #fafafa;
@code-color: darken(@background-color, 5%);
@accent-color: #eb811a;
@text-color: #222;
@ftext-color: lighten(@text-color, 30%);

.define-code-style() {
    & code {
        font-family: "Menlo";
        font-size: 1.7rem;
        line-height: 130%;

        background: @code-color;
        color: black;
        border-radius: 0.2rem;

        padding: 0.4rem;
    }
}

.reveal {
  background-color: @background-color;

  h1, h2, h3 {
    text-align: left;
    font-size: 2.5rem;
    color: @ftext-color;

    &.title {
      font-size:1.5em;
      color: @text-color;
    }

    &.author {
    font-size:1.1em;
    color: @ftext-color;
    letter-spacing: 1px;
    }

    &.date {
    font-size:0.6em;
    color: @ftext-color;
    letter-spacing: 1px;
    }
  }
  h2 {
  color: @accent-color;
  }

  // internal slide title
  h3 {
    color: @accent-color;
  }

  ul, p {
    text-align: left;
    display: block;
    color: @text-color;
    margin-top: 2rem;
    margin-bottom: 2rem;
    font-size: 2rem;
    &.date {
    font-size:0.5em;
    }
  }

  li {
    margin-bottom: 1rem;
  }

  th {
    margin-bottom: 1em;
    font-size: 3rem;
    font-family: 'League Gothic';
  }

  td {
    color: @text-color;
    font-size: 1.8rem;
  }

  blockquote {
    margin: 0px;
    box-shadow: none;
    border-left: solid #ddd;
    width: 100%;
    & p {
      font-size: 0.7em;
      margin: 0px;
    }
  }

  pre {
    font-size: 1rem;
    border: none;
    color: black;
    box-shadow: none;
    width: 100%;
    margin-left: 0;
    margin-right: 0;
    margin-top: 1.5em;
    margin-bottom: 1.5em;
    font-family: "Menlo";
    .define-code-style();
  }

  .define-code-style();


  .vz-link {
    padding-bottom: 0.5rem;
    padding-top: 0.5rem;
    font-size: 1rem;
    text-decoration: underline;
    &::before {
      content: "https://jsbin.com/"
    }
    &::after{
      content: "/edit"
    }
  }
}
</style>
<script src="https://cdnjs.cloudflare.com/ajax/libs/less.js/2.7.2/less.js"></script>
<link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Inconsolata" />

<section>
<section id="slide-org8a0f807">
<h2 id="org8a0f807">Overview</h2>
<div class="outline-text-2" id="text-org8a0f807">
</div>
</section>
<section id="slide-o1">
<h3 id="o1">Who am I</h3>
<ul>
<li>I am an assistant professor at Politecnico di Milano and I have worked in
processor architecture research and development for one of the top semiconductor
companies in the world.</li>

<li>Part of my interests include parallel and asynchronous programming, domain
specific languages and <b>javascript</b>.</li>

</ul>

</section>
<section id="slide-o2">
<h3 id="o2">Goal of this tutorial</h3>
<ul>
<li>Review of the fundamentals of Javascript</li>
<li>We'll use JSBin to run our examples. Head over <a href="http://jsbin.com/">to jsbin.com</a> to create an
account and store your work.</li>

</ul>
</section>
<section id="slide-o3">
<h3 id="o3">How do we run Javascript?</h3>
<ul>
<li>Javascript runs in your browser and interacts with HTML, CSS, and the
browser's console.</li>

<li><p>
Whenever you see a link like this in the presentation:
</p>

<p>
 <a class="vz-link" href="https://jsbin.com/hubujiw/edit?js,console">hubujiw</a>
</p>

<p>
click it to jump into the appropriate online IDE on <code>jsbin.com</code>.
</p></li>

<li>From there you can run or download the complete demo.</li>

</ul>

</section>
</section>
<section>
<section id="slide-org1bcc87b">
<h2 id="org1bcc87b">Javascript as a programming language</h2>
<div class="outline-text-2" id="text-org1bcc87b">
</div>
</section>
<section id="slide-j1">
<h3 id="j1">Not only in the browser</h3>
<ul>
<li>Server side with <a href="https://nodejs.org/en/about/">Node.js</a></li>
<li>In native, mobile apps through <a href="https://developer.apple.com/documentation/javascriptcore">Javascriptcore</a></li>

</ul>

</section>
<section id="slide-j2">
<h3 id="j2">Event loop</h3>
<ul>
<li>A JavaScript runtime contains a message queue, which is a list of
<i>functions</i> to be processed.</li>

<li><p>
Processing happens in a so called <i>event loop</i>:
</p>

<div class="org-src-container">

<pre><code class="js" >while (queue.waitForMessage()) {
   queue.processNextMessage();
}
</code></pre>
</div>

<blockquote nil>
<p>
Messages are actually functions.
</p>
</blockquote></li>

</ul>

</section>
<section id="slide-j3">
<h3 id="j3">Run-to-completion</h3>
<ul>
<li>Each message is processed completely before any other message is processed</li>

<li>Whenever a function runs, it cannot be pre-empted and will run entirely before
any other code runs</li>

</ul>

</section>
<section id="slide-j4">
<h3 id="j4">When messages are added (examples)</h3>
<ul>
<li>When you click on a graphic element, a listener function is
added.</li>

<li>When an IO event (e.g., network) happens, a registered <i>callback</i> is added.</li>

</ul>

<blockquote nil>
<p>
A <i>callback</i> is a common term in the Javascript world and it essentially is an
event-listener
</p>
</blockquote>

</section>
<section id="slide-j5">
<h3 id="j5">Javascript never blocks</h3>
<ul>
<li>Handling I/O is typically performed via events and callbacks</li>

<li>If your application is waiting for an external request to be executed it can
still process other things like user input.</li>

</ul>

</section>
<section id="slide-j6">
<h3 id="j6">The three-step ladder to Javascript enlightment</h3>
<ul>
<li>Fundamentals and recent additions</li>
<li>Higher order functions</li>
<li>Asynchronous programming</li>

</ul>

</section>
</section>
<section>
<section id="slide-org44d9091">
<h2 id="org44d9091">The fundamentals</h2>
<div class="outline-text-2" id="text-org44d9091">
</div>
</section>
<section id="slide-f1">
<h3 id="f1">Variables</h3>
<ul>
<li>A variable is a memory location with a <i>name</i> and a <i>value</i></li>

<li>You introduce variable with the keywords <code>var</code>, <code>let</code>, <code>const</code>.</li>

<li><p>
<code>const</code> creates <i>immutable</i> objects
</p>

<div class="org-src-container">

<pre><code class="js" >const foo = 'abc';
foo = 'def'; // TypeError
</code></pre>
</div></li>

<li><code>var</code> and <code>let</code> differ in scope. Check the demo:</li>

</ul>

<p>
 <a class="vz-link" href="https://jsbin.com/qenaras/4/edit?js,console">qenaras/4</a>
</p>

</section>
<section id="slide-f4">
<h3 id="f4">Javascript types</h3>
<p>
 <a class="vz-link" href="https://jsbin.com/zuqihep/11/edit?js,console">zuqihep/11</a>
</p>

<ul>
<li><b>Primitive</b> types: booleans, numbers, strings, <code>null</code>, and <code>undefined</code></li>

<li><b>Objects</b>: all other values (including lists).</li>

</ul>



</section>
<section id="slide-f8">
<h3 id="f8">Javascript logic predicates</h3>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Operator</th>
<th scope="col" class="org-left">Meaning</th>
<th scope="col" class="org-left">Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left"><code>&amp;&amp;</code></td>
<td class="org-left">Logic and</td>
<td class="org-left">shortcircuit (*)</td>
</tr>

<tr>
<td class="org-left"><code>¦¦</code></td>
<td class="org-left">Logic or</td>
<td class="org-left">shortcircuit (*)</td>
</tr>

<tr>
<td class="org-left">!</td>
<td class="org-left">Logic not</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">&gt;,&gt;=,&lt;,&lt;=</td>
<td class="org-left">Ordering</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">==</td>
<td class="org-left">Lenient equality</td>
<td class="org-left">Too loose, avoid!</td>
</tr>

<tr>
<td class="org-left">= = =</td>
<td class="org-left">Strict equality</td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
</table>

<p>
(*) Short circuiting means the following never invoke <code>foo</code>:
</p>

<div class="org-src-container">

<pre><code class="js" >false && foo()
true  || foo()
</code></pre>
</div>

</section>
<section id="slide-f9">
<h3 id="f9">Javascript strings</h3>
<p>
 <a class="vz-link" href="https://jsbin.com/noputor/2/edit?js,console">noputor/2</a>
</p>

<ul>
<li>Normal strings</li>

<li>Template literals</li>

</ul>


</section>
<section id="slide-f10">
<h3 id="f10">Loop constructs</h3>
<p>
 <a class="vz-link" href="https://jsbin.com/xotunaz/5/edit?js,console">xotunaz/5</a>
</p>

<ul>
<li>For</li>

<li>While</li>

<li>Exceptions</li>

</ul>


</section>
<section id="slide-f12">
<h3 id="f12">Functions</h3>
<p>
 <a class="vz-link" href="https://jsbin.com/beqazaz/3/edit?js,console">beqazaz/3</a>
</p>

<ul>
<li>Named functions</li>

<li>Anonymous functions</li>

<li>Arrow syntax</li>

</ul>

</section>
<section id="slide-f13">
<h3 id="f13">Constructing objects the old way - prototypes</h3>
<ul>
<li>Object literals are not the only way for building objects.</li>

<li>All JavaScript objects inherit the properties and methods from their prototype.</li>

<li>Objects created using an object literal, or with <code>new Object()</code>, inherit from a
prototype called <code>Object.prototype</code></li>

<li>Objects created with <code>new Date()</code> inherit the <code>Date.prototype</code>.</li>

</ul>

</section>
<section id="slide-f14">
<h3 id="f14">Constructing objects the old way - prototypes</h3>
<p>
Using a function definition:
</p>
<div class="org-src-container">

<pre><code class="js" >let Person = function(first, last, age, eyecolor) {
    this.firstName = first;
    this.lastName = last;
    this.age = age;
    this.eyeColor = eyecolor;
}

let myFather = new Person("John", "Doe", 50, "blue");

let myMother = new Person("Sally", "Rally", 48, "green");
</code></pre>
</div>

</section>
<section id="slide-f15">
<h3 id="f15">Constructing objects the new way - classes</h3>
<p>
 <a class="vz-link" href="https://jsbin.com/tofeket/2/edit?js,console">tofeket/2</a>
</p>

<p>
Classes are important for all the frameworks you are going to see in this
course.
</p>

</section>
<section id="slide-org499a362">
<h3 id="org499a362">Hands-on problem</h3>
<ul>
<li>Expand <code>colorPoint</code> with a function <code>draw</code> to draw it into a canvas (use the
<code>drawPoint</code> auxiliary function).</li>

<li><p>
Write a function that draws all the points contained in the array <code>points</code>
</p>

<p>
 <a class="vz-link" href="https://jsbin.com/bosiduy/8/edit?js,console,output">bosiduy/8</a>
</p></li>

</ul>

</section>
</section>
<section>
<section id="slide-org71b514c">
<h2 id="org71b514c">Higher order functions</h2>
<div class="outline-text-2" id="text-org71b514c">
</div>
</section>
<section id="slide-h1">
<h3 id="h1">What are they?</h3>
<ul>
<li><p>
Functions are first class. You can pass them into other functions as
parameters:
</p>

<div class="org-src-container">

<pre><code class="javascript" >let applyMaybe = (f, x) => (x) ? f(x) : x
</code></pre>
</div></li>
<li><p>
You can return a function
</p>

<div class="org-src-container">

<pre><code class="js" >let add = (x) => (a) =>  a + x;
</code></pre>
</div></li>

<li>Pervasive in all Javascript code</li>

</ul>

</section>
<section id="slide-h2">
<h3 id="h2">Callbacks</h3>
<p>
 <a class="vz-link" href="https://jsbin.com/wowupit/23/edit?js,console,output">wowupit/23</a>
</p>

</section>
<section id="slide-h4">
<h3 id="h4">Maps, folds and closures</h3>
<ul>
<li>Good for writing <b>more rubust code</b>
<ul>
<li>Declarative programming style (no more loops!)</li>
<li>Immutable variables (more intuitive code)</li>

</ul></li>

<li>Inherit good programming practice from <b>functional programming</b></li>

</ul>

</section>
<section id="slide-h5">
<h3 id="h5">Maps, folds and closures</h3>
<ul>
<li><p>
a map operation transforms all the elements of an array through a function:
</p>

<p>
\[map: [a] \rightarrow (a \rightarrow b) \rightarrow [b]\]
</p></li>

<li><p>
a reduce operation folds all the elements of an array through a function
</p>

<p>
\[reduce: [a] \rightarrow (b \rightarrow a \rightarrow b) \rightarrow b \rightarrow b\]
</p></li>

</ul>

</section>
<section id="slide-h6">
<h3 id="h6">Maps, folds and closures</h3>
<p>
 <a class="vz-link" href="https://jsbin.com/jaxuwat/4/edit?js,console">jaxuwat/4</a>
</p>

</section>
<section id="slide-orgb88ab4b">
<h3 id="orgb88ab4b">Hands-on problem</h3>
<ul>
<li>Remember <code>colorPoint?</code></li>

<li><p>
Draw all <code>points</code> with a <code>map</code>.
</p>

<p>
 <a class="vz-link" href="https://jsbin.com/bosiduy/8/edit?js,console,output">bosiduy/8</a>
</p></li>

</ul>

</section>
<section id="slide-h7">
<h3 id="h7">Closures</h3>
<p>
 <a class="vz-link" href="https://jsbin.com/jaxuwat/11/edit?js,console">jaxuwat/11</a>
</p>

</section>
<section id="slide-h8">
<h3 id="h8">Currying</h3>
<p>
 <a class="vz-link" href="https://jsbin.com/jaxuwat/12/edit?js,console">jaxuwat/12</a>
</p>

</section>
</section>
<section>
<section id="slide-org5531845">
<h2 id="org5531845">Dynamic HTML</h2>
<div class="outline-text-2" id="text-org5531845">
</div>
</section>
<section id="slide-i1">
<h3 id="i1">Introduction</h3>
<ul>
<li>Dynamic HTML means modifying the DOM through a Javascript expression that
depends on dynamic data.</li>

<li>It is probably the most important problem addressed today by modern
frameworks (React, etc..).</li>

</ul>

</section>
<section id="slide-i2">
<h3 id="i2">Poor man's dynamic HTML</h3>
<ul>
<li>As in the following days you are going to see the most advanced approaches,
today we'll start from the basics.</li>

<li><p>
One way to do it is with <a href="https://developer.mozilla.org/en-US/docs/Web/API/Element/insertAdjacentHTML">insertAdjacentHTML</a>
</p>

<div class="org-src-container">

<pre><code class="js" >// <div id="one">one</div>
var d1 = document.getElementById('one');
d1.insertAdjacentHTML('afterend', '<div id="two">two</div>');

// At this point, the new structure is:
// <div id="one">one</div><div id="two">two</div>
</code></pre>
</div></li>

</ul>

</section>
<section id="slide-i3">
<h3 id="i3">You can even use <code>innerHTML</code></h3>
<p>
 <a class="vz-link" href="https://jsbin.com/fificoj/1/edit?html,js,output">fificoj/1</a>
</p>

</section>
<section id="slide-i4">
<h3 id="i4">Other ways to do it</h3>
<ul>
<li>JQuery</li>
<li>React</li>
<li>Angular</li>
<li>D3js</li>

</ul>

</section>
<section id="slide-s1">
<h3 id="s1">Hands-on Problem</h3>
<p>
Combine the callback example and the dynamic HTML example to
create a function <code>renderPost(id)</code> to render the specified post
i.e., title, body
</p>

</section>
<section id="slide-s2">
<h3 id="s2">Hands-on Problem</h3>
<p>
Modify the previous function to print the name of the post creator after
the title (hint: you'll need another request!)
</p>

</section>
</section>
<section>
<section id="slide-org9a2ae1e">
<h2 id="org9a2ae1e">Asynchronous Javascript</h2>
<div class="outline-text-2" id="text-org9a2ae1e">
</div>
</section>
<section id="slide-a1">
<h3 id="a1">What is that and why it is important</h3>
<ul>
<li>Rendering a page may mean several (concurrent) requests. Imagine fetching
the comments in the previous hands on.</li>

<li>There is a need for an easier way to compose these calls and synchronize
code over these calls. One of the most used methods is called <b>promise</b>.</li>

</ul>

</section>
<section id="slide-a2">
<h3 id="a2">Promises</h3>
<ul>
<li>A promise is an object that is created by specific functions (typically
these functions request something on the network).</li>

<li><p>
Even before the request is finished, we can concatenate other functions to
be executed when the data is ready through the <code>then</code> method.
</p>

<div class="org-src-container">

<pre><code class="js" >let p = a_request_function(...);
p.then(function(result) {
// do something with the result
})
</code></pre>
</div></li>

</ul>

</section>
<section id="slide-a3">
<h3 id="a3">Promises</h3>
<ul>
<li><p>
The concatenated function can return a promise as well:
</p>

<div class="org-src-container">

<pre><code class="js" >a_request_function(...)
  .then(function(r1) {
  return another_request_function(r1);
}).then(function(r2) {
  ...
})
</code></pre>
</div></li>

<li><p>
We can wait for more promises in parallel:
</p>

<div class="org-src-container">

<pre><code class="js" >let p1 = a_request_function(...);
let p2 = another_request_function(...);
Promise.all([p1,p2]).then(([r1,r2]) => ...);
</code></pre>
</div></li>

</ul>

</section>
<section id="slide-a4">
<h3 id="a4">Promises</h3>
<ul>
<li><p>
One particular example is the <code>fetch</code> function (which is a standardized ajax call)
</p>

<p>
 <a class="vz-link" href="https://jsbin.com/ruxuveh/5/edit?js,console">ruxuveh/5</a>
</p></li>

</ul>

</section>
<section id="slide-s3">
<h3 id="s3">Hands-on problem</h3>
<p>
Modify the previous solution to print the name of the post creator after
the title and the all the comments associated with that post.
</p>

</section>
<section id="slide-a5">
<h3 id="a5">Newer style / Async and await</h3>
<p>
 <a class="vz-link" href="https://jsbin.com/conocag/7/edit?js,console">conocag/7</a>
</p>
</section>
</section>
</div>
</div>
<script src="http://cdn.jsdelivr.net/reveal.js/3.0.0/lib/js/head.min.js"></script>
<script src="http://cdn.jsdelivr.net/reveal.js/3.0.0/js/reveal.js"></script>

<script>
// Full list of configuration options available here:
// https://github.com/hakimel/reveal.js#configuration
Reveal.initialize({

controls: true,
progress: true,
history: true,
center: true,
slideNumber: 'c',
rollingLinks: false,
keyboard: true,
overview: true,

theme: Reveal.getQueryHash().theme, // available themes are in /css/theme
transition: Reveal.getQueryHash().transition || 'fade', // default/cube/page/concave/zoom/linear/fade/none
transitionSpeed: 'default',
multiplex: {
    secret: '', // null if client
    id: '', // id, obtained from socket.io server
    url: '' // Location of socket.io server
},

// Optional libraries used to extend on reveal.js
dependencies: [
 { src: 'http://cdn.jsdelivr.net/reveal.js/3.0.0/plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } }]
});
</script>
</body>
</html>
