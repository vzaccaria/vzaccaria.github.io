<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head lang="en">
    <title>soluzioni prova scritta del 29 Giugno</title>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta name="description" content="">
    <meta name="keywords" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no,minimal-ui">
    <script type="text/javascript" src="/js/client.js"></script>
    <link rel="icon" type="image/png" href="/img/favicon.png">
  </head>
  <body ng-app="application">
    <div class="site_wrapper">
      <div class="sidebar"> <img class="sidebar__picture">
        <div class="sidebar__name">Vittorio Zaccaria</div>
        <div class="sidebar__address">Politecnico di Milano</div>
        <ul class="sidebar__link_list">
          <li onclick="location.href=&apos;/&apos;" style="cursor: pointer" class="sidebar__link_item"><span class="sidebar__link_item__icon fa-stack"><i class="fa fa-stack-2x fa-circle"></i><i class="sidebar__link_item__icon__inner fa fa-stack-1x fa-inverse fa-home"></i></span>
            <div class="sidebar__link_item__name">Home</div>
          </li>
          <li onclick="location.href=&apos;/research.html&apos;" style="cursor: pointer" class="sidebar__link_item"><span class="sidebar__link_item__icon fa-stack"><i class="fa fa-stack-2x fa-circle"></i><i class="sidebar__link_item__icon__inner fa fa-stack-1x fa-inverse fa-flask"></i></span>
            <div class="sidebar__link_item__name">Research</div>
          </li>
          <li onclick="location.href=&apos;/blog.html&apos;" style="cursor: pointer" class="sidebar__link_item"><span class="sidebar__link_item__icon fa-stack"><i class="fa fa-stack-2x fa-circle"></i><i class="sidebar__link_item__icon__inner fa fa-stack-1x fa-inverse fa-quote-left"></i></span>
            <div class="sidebar__link_item__name">Blog</div>
          </li>
          <li onclick="location.href=&apos;/projects.html&apos;" style="cursor: pointer" class="sidebar__link_item"><span class="sidebar__link_item__icon fa-stack"><i class="fa fa-stack-2x fa-circle"></i><i class="sidebar__link_item__icon__inner fa fa-stack-1x fa-inverse fa-floppy-o"></i></span>
            <div class="sidebar__link_item__name">Projects</div>
          </li>
          <li onclick="location.href=&apos;/teaching.html&apos;" style="cursor: pointer" class="sidebar__link_item"><span class="sidebar__link_item__icon fa-stack"><i class="fa fa-stack-2x fa-circle"></i><i class="sidebar__link_item__icon__inner fa fa-stack-1x fa-inverse fa-graduation-cap"></i></span>
            <div class="sidebar__link_item__name">Teaching</div>
          </li>
          <li onclick="location.href=&apos;/deposit/cv.pdf&apos;" style="cursor: pointer" class="sidebar__link_item"><span class="sidebar__link_item__icon fa-stack"><i class="fa fa-stack-2x fa-circle"></i><i class="sidebar__link_item__icon__inner fa fa-stack-1x fa-inverse fa-user"></i></span>
            <div class="sidebar__link_item__name">CV</div>
          </li>
          <li onclick="location.href=&apos;/videos.html&apos;" style="cursor: pointer" class="sidebar__link_item"><span class="sidebar__link_item__icon fa-stack"><i class="fa fa-stack-2x fa-circle"></i><i class="sidebar__link_item__icon__inner fa fa-stack-1x fa-inverse fa-youtube-play"></i></span>
            <div class="sidebar__link_item__name">Videos</div>
          </li>
          <li onclick="location.href=&apos;/address.html&apos;" style="cursor: pointer" class="sidebar__link_item"><span class="sidebar__link_item__icon fa-stack"><i class="fa fa-stack-2x fa-circle"></i><i class="sidebar__link_item__icon__inner fa fa-stack-1x fa-inverse fa-map-marker"></i></span>
            <div class="sidebar__link_item__name">Address</div>
          </li>
        </ul>
        <div class="sidebar__bottom"> 
          <div onclick="location.href=&apos;http://www.linkedin.com/in/vzaccaria&apos;" style="cursor: pointer" class="sidebar__bottom__button"><i class="fa fa-linkedin-square"></i></div>
          <div onclick="location.href=&apos;http://twitter.com/_vzaccaria_&apos;" style="cursor: pointer" class="sidebar__bottom__button"><i class="fa fa-twitter-square"></i></div>
          <div onclick="location.href=&apos;https://plus.google.com/116322227495215922957/about&apos;" style="cursor: pointer" class="sidebar__bottom__button"><i class="fa fa-google-plus-square"></i></div>
        </div>
      </div>
      <div class="site_container">
        <div class="post_container">
          <div class="post_container__post__title">soluzioni prova scritta del 29 Giugno</div>
          <div class="post_container__post__subtitle"> 
            <div class="post_container__post__date"> <i class="fa fa-calendar-o"> </i>
              <div class="post_container__post__date_value">Tuesday, June 30th 2015</div>
            </div>
            <div class="post_container__post__category"> <i class="fa fa-flag-o"> </i>
              <div class="post_container__post__category_value">infob</div>
            </div>
            <div class="post_container__post__tags"> <i class="fa fa-tags"></i>
              <div class="post_container__post__tag">esame</div>
            </div>
            <div class="share_buttons"> 
              <div class="share_buttons__message">Share: </div>
              <div style="cursor: pointer" class="share_buttons__share_reddit"><i class="fa fa-reddit"> </i></div>
              <div style="cursor: pointer" class="share_buttons__share_twitter"><i class="fa fa-twitter"></i></div>
            </div>
          </div>
          <div class="post_text"><h1 id="esercizio-numero-1-linguaggio-c">Esercizio numero 1 - Linguaggio C</h1>
<p>Si considerino i seguenti tipi di dato in C. Essi servono a contenere le
informazioni relative ad una carta di credito, incluse le transazioni
eseguite.</p>
<pre><code class="lang-c">#define N 100
typedef char Stringa[N];
typedef enum {falso, vero} bool;

typedef struct // descrizione della transazione
{
    float importo;
    Stringa nazione;
    int timestamp;
    // tempo dell&#39;acquisto espresso in secondi dal 1/1/1970.
    // Ad es. le 9:00:00 del il 2015.06.29 = 1435561200 secondo
    //        le 9:01:00 del il 2015.06.29 = 1435561260 secondo
    bool usato_pin; // determina se la transazione è avvenuta richiedendo il pin all&#39;utente
} Acquisto;

typedef struct
{
    int card_number; // numero della carta
    Acquisto trans[N];
    int n_trans; // numero delle transazioni eseguite
} Carta;
</code></pre>
<h2 id="domanda-1">Domanda 1</h2>
<p>Si definisca un nuovo tipo di struttura <code>Persona</code> atta a contenere le
informazioni relative al proprietario della carta e si modifichi la
definizione del tipo <code>Carta</code> in modo che contenga un campo
<code>proprietario</code> di tipo <code>Persona</code>.</p>
<pre><code class="lang-c">typedef struct
{
    Stringa nome;
    Stringa cognome;
} Persona;

typedef struct
{
    int card_number;      // numero della carta
    Acquisto trans[N];    // acquisti effettuati con la carta
    Persona proprietario; // 
    int n_trans;          // numero delle transazioni eseguite
} Carta;
</code></pre>
<h2 id="domanda-2">Domanda 2</h2>
<p>Si scriva un frammento di codice in linguaggio C per rilevare le carte
che possono aver subito una frode. Una carta può aver subito una frode
se:</p>
<p>a.  riporta due transazioni consecutive in meno di 1 minuto, oppure</p>
<p>b.  riporta due transazioni consecutive con PIN in nazioni diverse in meno di
    un&#39;ora.</p>
<p>In particolare:</p>
<ol>
<li><p>Il codice deve contenere una variabile <code>cards</code> che memorizzi 1
milione di carte di credito</p>
</li>
<li><p>Assumendo che la variabile <code>cards</code> sia stata riempita
precedentemente:</p>
<ul>
<li><p>si stampino i numeri delle carte che possono aver subito una
frode. Si tenga presente che le transazioni registrate in
<code>Acquisto trans[N]</code> sono ordinate cronologicamente.</p>
</li>
<li><p>si copino le informazioni di tutte le persone frodate nell&#39;array
<code>persone_frodate</code> (senza lasciare buchi)</p>
</li>
</ul>
</li>
</ol>
<!-- -->
<pre><code class="lang-c">#define M 1000000
int main()
{
    Carta cards[M];
    int i, j, k, frodata;
    Persona persone_frodate[M];
    for(i = 0; i &lt; M; i++) {
        frodata = 0; 
        k = 0;
        for(j = 0; (j &lt; cards[i].n_trans - 1) &amp;&amp; frodata == 0; j++) {
            if(cards[i].trans[j+1].timestamp - cards[i].trans[j].timestamp &lt; 60) {
                frodata = 1;
            }
            else {
                if(cards[i].trans[j+1].usato_pin == vero &amp;&amp; 
                   cards[i].trans[j].usato_pin == vero &amp;&amp;
                   cards[i].trans[j+1].timestamp - cards[i].trans[j].timestamp &lt; 60 * 60 &amp;&amp;
                   strcmp(cards[i].trans[j+1].nazione, cards[i].trans[j].nazione) != 0) {
                    frodata = 1;
                }
            }
        }
        if (frodata) {
            printf(&quot;\nla carta %d è stata frodata &quot;, cards[i].card_number);
            persone_frodate[k] = cards[i].proprietario;
            k++;
        }
    }
}
</code></pre>
<h1 id="esercizio-numero-2-matlab">Esercizio numero 2 - Matlab</h1>
<p>Si sviluppino in Matlab le seguenti funzioni:</p>
<h2 id="funzione-n-1">Funzione n. 1</h2>
<p>Si definisca la funzione <code>rimuovi(A,v)</code> tale che, dato un vettore <code>A</code> ed
un valore <code>v</code> in ingresso, ritorni il vettore <code>A</code> privato di <code>v</code> (se
contenuto in esso), altrimenti restituisce <code>A</code>.</p>
<ul>
<li><code>rimuovi([ 5, 6, 7 ], 5)</code> ritorna <code>[6, 7]</code></li>
<li><code>rimuovi([ 5, 6, 7 ], 9)</code> ritorna <code>[5, 6, 7]</code></li>
</ul>
<p>Spazio soluzione</p>
<pre><code class="lang-octave">function B = rimuovi(A, v)
  B = A(find(A~=v));
end
</code></pre>
<h2 id="funzione-n-2">Funzione n. 2</h2>
<p>Si definisca la funzione <code>aggiungi(Q,v)</code> che prende in ingresso una
matrice <code>Q</code> ed un valore <code>v</code>, e restituisce una matrice corrispondente a
<code>Q</code> a cui è stato aggiunto <code>v</code> come primo elemento di ogni riga.</p>
<p>Esempio:</p>
<ul>
<li><code>aggiungi([ 5, 4; 6, 8; 7, 9 ], 3)</code> ritorna
<code>[ 3, 5, 4; 3, 6, 8; 3, 7, 9 ]</code></li>
</ul>
<p>Spazio soluzione</p>
<pre><code class="lang-octave">function T = aggiungi(Q, e)
    T = [(ones(rows(Q), 1) .* e) Q];
end
</code></pre>
<h2 id="funzione-n-3">Funzione n. 3</h2>
<p>Si supponga di avere un array <code>S</code> di <code>n</code> numeri distinti</p>
<pre><code>S = [5,8,1]
</code></pre><p>Una <strong>disposizione semplice</strong> di lunghezza <code>k</code> di tale insieme (con <code>k</code>
≤ <code>n</code>), è rappresentabile da una matrice di k colonne che contiene, in
ogni riga, un sottoinsieme ordinato di k elementi di S.</p>
<p>Le righe della matrice sono tutte distinte e all’interno di ogni riga
non si possono trovare ripetizioni di uno stesso elemento. Due righe
possono contenere gli stessi elementi purché in ordine differente.</p>
<p>Ad esempio, una disposizione semplice di <code>S</code> con <code>k=2</code> è la matrice
seguente[^1]</p>
<pre><code>[ 5, 8;  5, 1;  8, 5;  8, 1;  1, 5;  1, 8 ]
</code></pre><p>Il vostro compito e quello di scrivere in Matlab una funzione
<strong>ricorsiva</strong> <code>disposizioni(S,k)</code> che implementa il calcolo delle
disposizioni semplici <code>k</code> di un insieme <code>S</code>, ad esempio</p>
<pre><code class="lang-octave">octave&gt; disposizioni([5,8,1],2)

ans =

    5   8
    5   1
    8   5
    8   1
    1   5
    1   8
</code></pre>
<h2 id="osservazioni-utili-per-l-implementazione">Osservazioni utili per l&#39;implementazione</h2>
<p>Per <code>k=1</code>, l&#39;elenco delle disposizioni semplici di <code>S</code> corrisponde ad
<code>S</code> <em>trasposto</em>; nel nostro esempio</p>
<pre><code class="lang-octave">octave&gt; disposizioni([5,8,1],1)

    5
    8
    1
</code></pre>
<p>Quando <code>k&gt;1,</code> le disposizioni si possono calcolare sfruttando le
funzioni n. 1 e 2 definite ai punti precedenti nel modo seguente</p>
<ol>
<li>si rimuove un elemento <code>v</code> di <code>S</code>,</li>
<li>si aggiunge <code>v</code> a tutte le disposizioni di <code>k-1</code> elementi di <code>S - v</code>
(ovvero il vettore <code>S</code> a cui è stato rimosso v).</li>
</ol>
<p>la procedura sopra deve essere ripetuta per tutti gli elementi <code>v</code> di <code>S</code></p>
<p>Nel nostro esempio, per k = 2</p>
<table>
<thead>
<tr>
<th style="text-align:center"><strong>S</strong></th>
<th style="text-align:center"><strong>v</strong></th>
<th style="text-align:center"><strong>S - v</strong></th>
<th style="text-align:center"><strong>disposizioni(S-v,1)</strong></th>
<th style="text-align:center"><strong>Disposizioni risultanti</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">[5,8,1]</td>
<td style="text-align:center">5</td>
<td style="text-align:center">[8, 1]</td>
<td style="text-align:center">[8; 1]</td>
<td style="text-align:center">[ 5, 8; 5, 1 ]</td>
</tr>
<tr>
<td style="text-align:center">[5,8,1]</td>
<td style="text-align:center">8</td>
<td style="text-align:center">[5, 1]</td>
<td style="text-align:center">[5; 1]</td>
<td style="text-align:center">[ 8, 5; 8, 1 ]</td>
</tr>
<tr>
<td style="text-align:center">[5,8,1]</td>
<td style="text-align:center">1</td>
<td style="text-align:center">[5, 8]</td>
<td style="text-align:center">[5; 8]</td>
<td style="text-align:center">[ 1, 5; 1, 8 ]</td>
</tr>
</tbody>
</table>
<p>Il risultato finale e&#39; la fusione delle <strong>disposizioni risultanti</strong> in un&#39;unica
matrice:</p>
<pre><code class="lang-octave">[ [5, 8]; [5, 1] ; [8, 5]; [8, 1]; [1, 5]; [1, 8] ]
</code></pre>
<p>Spazio soluzione</p>
<pre><code class="lang-octave">function P = disposizioni(s,k)
  n = length(s);
    if k == 1
      P = s&#39;;
    else
        P = [];
        for x = 1:n
            e = s(x);
            t = rimuovi(s, e);
            Q = disposizioni(t, k-1);
            T = aggiungi(Q, e);
            P = [P; T];
        end
    end
end
</code></pre>
<h1 id="esercizio-numero-3-c-con-tabelle-verit-">Esercizio numero 3 - C con tabelle verità</h1>
<p>Sia dato il seguente programma:</p>
<pre><code class="lang-c">if(!a) {
    if (b) {
        if((a &amp;&amp; c) || (!b &amp;&amp; !c)) {
            printf(&quot;Nooo!&quot;);
        } else {
            printf(&quot;Yes!&quot;);
        }
    }
}
</code></pre>
<p>dove <code>a</code>, <code>b</code> e <code>c</code> sono variabili inizializzate in precedenza ad un
valore che può essere 0 oppure 1.</p>
<h2 id="domanda-1">Domanda 1</h2>
<p>Si compili la seguente tabella per ogni combinazione dei valori delle
tre variabili</p>
<table>
<thead>
<tr>
<th style="text-align:center"><strong>a</strong></th>
<th style="text-align:center"><strong>b</strong></th>
<th style="text-align:center"><strong>c</strong></th>
<th style="text-align:center"><strong>Messaggio stampato</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">0</td>
<td style="text-align:center">0</td>
<td style="text-align:center">0</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">0</td>
<td style="text-align:center">0</td>
<td style="text-align:center">1</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">0</td>
<td style="text-align:center">1</td>
<td style="text-align:center">0</td>
<td style="text-align:center">Yes!</td>
</tr>
<tr>
<td style="text-align:center">0</td>
<td style="text-align:center">1</td>
<td style="text-align:center">1</td>
<td style="text-align:center">Yes!</td>
</tr>
<tr>
<td style="text-align:center">1</td>
<td style="text-align:center">0</td>
<td style="text-align:center">0</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">1</td>
<td style="text-align:center">0</td>
<td style="text-align:center">1</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">1</td>
<td style="text-align:center">1</td>
<td style="text-align:center">0</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">1</td>
<td style="text-align:center">1</td>
<td style="text-align:center">1</td>
</tr>
</tbody>
</table>
<h2 id="domanda-2">Domanda 2</h2>
<p>Si riscriva il frammento di codice utilizzando un solo <code>if</code>, ove la
condizione deve essere la più ridotta possibile in termini di operatori
e variabili utilizzate.</p>
<pre><code class="lang-c">if(!a &amp;&amp; b) {
    printf(&quot;Yes!&quot;);
}
</code></pre>
<p>[^1]: Ricordate che in una matrice Matlab/Octave, il punto e virgola
    separa le righe.</p>
</div>
          <script src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_SVG"></script>
          <div id="disqus_thread" class="post_container__comments"> 
            <script>(function() {
  var disqus_shortname, dsq;

  disqus_shortname = 'vittoriozaccaria';

  dsq = document.createElement('script');

  dsq.type = 'text/javascript';

  dsq.async = true;

  dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';

  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);

}).call(this);

            </script><a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>