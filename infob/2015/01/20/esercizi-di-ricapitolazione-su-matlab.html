<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head lang="en">
    <title>Esercizi di ricapitolazione su Matlab</title>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta name="description" content="">
    <meta name="keywords" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no,minimal-ui">
    <script type="text/javascript" src="/v2/js/client.js"></script>
  </head>
  <body ng-app="application">
    <div class="site_wrapper">
      <div class="sidebar"> <img class="sidebar__picture">
        <div class="sidebar__name">Vittorio Zaccaria</div>
        <div class="sidebar__address">Politecnico di Milano</div>
        <ul class="sidebar__link_list">
          <li onclick="location.href=&apos;/v2&apos;" style="cursor: pointer" class="sidebar__link_item"><span class="sidebar__link_item__icon fa-stack"><i class="fa fa-stack-2x fa-circle"></i><i class="sidebar__link_item__icon__inner fa fa-stack-1x fa-inverse fa-home"></i></span>
            <div class="sidebar__link_item__name">Home</div>
          </li>
          <li onclick="location.href=&apos;/v2/research.html&apos;" style="cursor: pointer" class="sidebar__link_item"><span class="sidebar__link_item__icon fa-stack"><i class="fa fa-stack-2x fa-circle"></i><i class="sidebar__link_item__icon__inner fa fa-stack-1x fa-inverse fa-flask"></i></span>
            <div class="sidebar__link_item__name">Research</div>
          </li>
          <li onclick="location.href=&apos;/v2/blog.html&apos;" style="cursor: pointer" class="sidebar__link_item"><span class="sidebar__link_item__icon fa-stack"><i class="fa fa-stack-2x fa-circle"></i><i class="sidebar__link_item__icon__inner fa fa-stack-1x fa-inverse fa-quote-left"></i></span>
            <div class="sidebar__link_item__name">Blog</div>
          </li>
          <li onclick="location.href=&apos;/v2/projects.html&apos;" style="cursor: pointer" class="sidebar__link_item"><span class="sidebar__link_item__icon fa-stack"><i class="fa fa-stack-2x fa-circle"></i><i class="sidebar__link_item__icon__inner fa fa-stack-1x fa-inverse fa-floppy-o"></i></span>
            <div class="sidebar__link_item__name">Projects</div>
          </li>
          <li onclick="location.href=&apos;/v2/teaching.html&apos;" style="cursor: pointer" class="sidebar__link_item"><span class="sidebar__link_item__icon fa-stack"><i class="fa fa-stack-2x fa-circle"></i><i class="sidebar__link_item__icon__inner fa fa-stack-1x fa-inverse fa-graduation-cap"></i></span>
            <div class="sidebar__link_item__name">Teaching</div>
          </li>
          <li onclick="location.href=&apos;http://www.vittoriozaccaria.net/deposit/cv.pdf&apos;" style="cursor: pointer" class="sidebar__link_item"><span class="sidebar__link_item__icon fa-stack"><i class="fa fa-stack-2x fa-circle"></i><i class="sidebar__link_item__icon__inner fa fa-stack-1x fa-inverse fa-user"></i></span>
            <div class="sidebar__link_item__name">CV</div>
          </li>
          <li onclick="location.href=&apos;/v2/videos.html&apos;" style="cursor: pointer" class="sidebar__link_item"><span class="sidebar__link_item__icon fa-stack"><i class="fa fa-stack-2x fa-circle"></i><i class="sidebar__link_item__icon__inner fa fa-stack-1x fa-inverse fa-youtube-play"></i></span>
            <div class="sidebar__link_item__name">Videos</div>
          </li>
          <li onclick="location.href=&apos;/v2/address.html&apos;" style="cursor: pointer" class="sidebar__link_item"><span class="sidebar__link_item__icon fa-stack"><i class="fa fa-stack-2x fa-circle"></i><i class="sidebar__link_item__icon__inner fa fa-stack-1x fa-inverse fa-map-marker"></i></span>
            <div class="sidebar__link_item__name">Address</div>
          </li>
        </ul>
        <div class="sidebar__bottom"> 
          <div onclick="location.href=&apos;http://www.linkedin.com/in/vzaccaria&apos;" style="cursor: pointer" class="sidebar__bottom__button"><i class="fa fa-linkedin-square"></i></div>
          <div onclick="location.href=&apos;http://twitter.com/_vzaccaria_&apos;" style="cursor: pointer" class="sidebar__bottom__button"><i class="fa fa-twitter-square"></i></div>
          <div onclick="location.href=&apos;https://plus.google.com/116322227495215922957/about&apos;" style="cursor: pointer" class="sidebar__bottom__button"><i class="fa fa-google-plus-square"></i></div>
        </div>
      </div>
      <div class="site_container">
        <div class="post_container">
          <div class="post_container__post__title">Esercizi di ricapitolazione su Matlab</div>
          <div class="post_container__post__subtitle"> 
            <div class="post_container__post__date"> <i class="fa fa-calendar-o"> </i>
              <div class="post_container__post__date_value">Tuesday, January 20th 2015</div>
            </div>
            <div class="post_container__post__category"> <i class="fa fa-flag-o"> </i>
              <div class="post_container__post__category_value">infob</div>
            </div>
            <div class="post_container__post__tags"> <i class="fa fa-tags"></i>
              <div class="post_container__post__tag">esercizi</div>
            </div>
            <div class="share_buttons"> 
              <div class="share_buttons__message">Share: </div>
              <div style="cursor: pointer" class="share_buttons__share_reddit"><i class="fa fa-reddit"> </i></div>
              <div style="cursor: pointer" class="share_buttons__share_twitter"><i class="fa fa-twitter"></i></div>
            </div>
          </div>
          <div class="post_text"><h1 id="esercizio-su-matrice">Esercizio su matrice</h1>
<p>Si scriva in Octave/MATLAB la funzione <code>analisiMatrice</code> che:
ricevendo come parametro una matrice <code>a</code>, verifica che i suoi valori
NON siano tutti uguali. Se questo è verificato:</p>
<ul>
<li>calcola il valore medio <code>ma</code> degli elementi di <code>a</code> (la somma di tutti gli elementi di <code>a</code> divisa per il loro numero);</li>
<li>calcola e restituisce al chiamante il numero <code>NM</code> degli elementi di <code>a</code> maggiori di <code>ma</code>;</li>
<li>calcola e restituisce al chiamante il numero <code>Nm</code> degli elementi di <code>a</code> minori di <code>ma</code>;</li>
<li>calcola e restituisce al chiamante il valore medio <code>mMag</code> degli (<code>NM</code>) elementi di <code>a</code> maggiori di <code>ma</code>;</li>
<li>calcola e restituisce al chiamante il valore medio <code>mMin</code> degli (Nm) elementi di <code>a</code> minori di <code>ma</code>;</li>
<li>calcola e restituisce al chiamante il valore <code>val = NM*mMag-Nm*mMin</code>.</li>
</ul>
<p>Se invece i valori della matrice sono tutti uguali la funzione, dopo aver fatto questa verifica, non calcola i valori sopra indicati, ma si limita ad assegnare a tutti i parametri in uscita il valore 0.</p>
<pre><code class="lang-matlab">function [NM Nm mMag mMin val] = analisiMatrice(a)
    if (all(all(a == a(1,1))))
     NM=0; Nm=0; mMag=0; mMin=0; val=0;
     return
    end
    [R,C] = size(a);
    ma = mean(mean(a));
    NM = sum(sum(a&gt;ma));
    Nm = sum(sum(a&lt;ma));
    mMag = sum(a(a&gt;ma))/NM;
    mMin = sum(a(a&lt;ma))/Nm;
    val = NM*mMag-Nm*mMin;
</code></pre>
<h1 id="esercizio-su-database">Esercizio su database</h1>
<p>Si scriva uno script che legga da file l’archivio sulla produttività (utilizzando la funzione predefinita <code>textread</code>) e inserisca i dati letti in un array di strutture. </p>
<p>Tale array deve contenere, per ogni dipendente, una struttura con un campo <code>nome</code> per memorizzare il nome del dipendente, un campo <code>ore</code> per il numero medio di ore, e un campo <code>contratti</code> per il numero di contratti. </p>
<p>Successivamente lo script deve calcolare, per ogni dipendente, lo stipendio, memorizzandolo in un opportuno campo di nome stipendio aggiunto alla struttura che già contiene gli altri dati. Lo stipendio viene calcolato in base ad un coefficiente di produttività:</p>
<ol>
<li>Se il lavoratore ha lavorato meno di 7 ore, <code>coeff</code> è pari a 5</li>
<li>Se ha lavorato più di 12 ore, <code>coeff</code> è pari a 6</li>
<li>Altrimenti <code>coeff</code> è pari a 6</li>
</ol>
<p>Per calcolare lo stipendio complessivo:</p>
<ol>
<li>Lo stipendio è pari a <code>coeff * ore * 24 *</code></li>
<li>Bonus di 500 euro per chi ha fatto piu&#39; di 47 contratti</li>
</ol>
<p>Si chiede di stampare a video il numero dei dipendenti che, pur lavorando più di 12 ore al giorno (in media), guadagnano meno della media dei dipendenti.</p>
<p><strong>Soluzione</strong>:</p>
<pre><code class="lang-matlab">[nomi ore contratti] = textread(&#39;prod.dat&#39;, &#39;%s %f %f&#39;);

% `dipendente`: crea una struttura dati dipendente dagli argomenti
function [dip] = dipendente(nome, ore, contratti)
    dip.nome = nome;
    dip.ore = ore;
    dip.contratti = contratti;
end

% `retribuzione`: calcola la retribuzione per dipendente
function [dip] = retribuzione(dip)
    coeff = 10;
    if dip.ore &lt; 7
        coeff = 5;
    else 
        if dip.ore &gt; 12 
            coeff = 6;
        end
    end

    dip.stipendio = dip.ore * 24 * coeff;

    if dip.contratti &gt;= 48
        dip.stipendio = dip.stipendio + 500;
    end
end

for i=1:length(nomi)
    dipendenti(i) = dipendente(nomi(i), ore(i), contratti(i));
end

dipendenti = arrayfun(@retribuzione, dipendenti)
mediastip = mean([dipendenti.stipendio])

% `filtra`: filtra un array in base ad una condizione
function [ret] = filtra(condizione, array)
    ret = array(find(arrayfun(condizione, array) == 1));
end

filtrati = filtra(@(d)(d.ore &gt; 12 &amp;&amp; d.stipendio &lt; mediastip), dipendenti)

function stampa(dip)
    printf(&quot;Nome: %s, stipendio: %d, ore %d, contratti %d \n&quot;, char(dip.nome), dip.stipendio, dip.ore, dip.contratti);
end

arrayfun(@stampa,filtrati);
</code></pre>
<p>Scoperto l&#39;inghippo della stringa <code>nome</code>. Quando viene letta dal file, viene trasformata in una <a href="https://www.gnu.org/software/octave/doc/interpreter/Cell-Arrays-of-Strings.html">stringa-array di celle</a>. Per convertirla in stringa semplice, si usa la funzione <code>char()</code>.</p>
</div>
          <script src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_SVG"></script>
          <div id="disqus_thread" class="post_container__comments"> 
            <script>(function() {
  var disqus_shortname, dsq;

  disqus_shortname = 'vittoriozaccaria';

  dsq = document.createElement('script');

  dsq.type = 'text/javascript';

  dsq.async = true;

  dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';

  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);

}).call(this);

            </script><a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>