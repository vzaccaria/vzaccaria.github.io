<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head lang="en">
    <title>Soluzioni seconda prova in itinere</title>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta name="description" content="">
    <meta name="keywords" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no,minimal-ui">
    <script type="text/javascript" src="/v2/js/client.js"></script>
  </head>
  <body ng-app="application">
    <div class="site_wrapper">
      <div class="sidebar"> <img class="sidebar__picture">
        <div class="sidebar__name">Vittorio Zaccaria</div>
        <div class="sidebar__address">Politecnico di Milano</div>
        <ul class="sidebar__link_list">
          <li onclick="location.href=&apos;/v2&apos;" style="cursor: pointer" class="sidebar__link_item"><span class="sidebar__link_item__icon fa-stack"><i class="fa fa-stack-2x fa-circle"></i><i class="sidebar__link_item__icon__inner fa fa-stack-1x fa-inverse fa-home"></i></span>
            <div class="sidebar__link_item__name">Home</div>
          </li>
          <li onclick="location.href=&apos;/v2/research.html&apos;" style="cursor: pointer" class="sidebar__link_item"><span class="sidebar__link_item__icon fa-stack"><i class="fa fa-stack-2x fa-circle"></i><i class="sidebar__link_item__icon__inner fa fa-stack-1x fa-inverse fa-flask"></i></span>
            <div class="sidebar__link_item__name">Research</div>
          </li>
          <li onclick="location.href=&apos;/v2/blog.html&apos;" style="cursor: pointer" class="sidebar__link_item"><span class="sidebar__link_item__icon fa-stack"><i class="fa fa-stack-2x fa-circle"></i><i class="sidebar__link_item__icon__inner fa fa-stack-1x fa-inverse fa-quote-left"></i></span>
            <div class="sidebar__link_item__name">Blog</div>
          </li>
          <li onclick="location.href=&apos;/v2/projects.html&apos;" style="cursor: pointer" class="sidebar__link_item"><span class="sidebar__link_item__icon fa-stack"><i class="fa fa-stack-2x fa-circle"></i><i class="sidebar__link_item__icon__inner fa fa-stack-1x fa-inverse fa-floppy-o"></i></span>
            <div class="sidebar__link_item__name">Projects</div>
          </li>
          <li onclick="location.href=&apos;/v2/teaching.html&apos;" style="cursor: pointer" class="sidebar__link_item"><span class="sidebar__link_item__icon fa-stack"><i class="fa fa-stack-2x fa-circle"></i><i class="sidebar__link_item__icon__inner fa fa-stack-1x fa-inverse fa-graduation-cap"></i></span>
            <div class="sidebar__link_item__name">Teaching</div>
          </li>
          <li onclick="location.href=&apos;http://www.vittoriozaccaria.net/deposit/cv.pdf&apos;" style="cursor: pointer" class="sidebar__link_item"><span class="sidebar__link_item__icon fa-stack"><i class="fa fa-stack-2x fa-circle"></i><i class="sidebar__link_item__icon__inner fa fa-stack-1x fa-inverse fa-user"></i></span>
            <div class="sidebar__link_item__name">CV</div>
          </li>
          <li onclick="location.href=&apos;/v2/videos.html&apos;" style="cursor: pointer" class="sidebar__link_item"><span class="sidebar__link_item__icon fa-stack"><i class="fa fa-stack-2x fa-circle"></i><i class="sidebar__link_item__icon__inner fa fa-stack-1x fa-inverse fa-youtube-play"></i></span>
            <div class="sidebar__link_item__name">Videos</div>
          </li>
          <li onclick="location.href=&apos;/v2/address.html&apos;" style="cursor: pointer" class="sidebar__link_item"><span class="sidebar__link_item__icon fa-stack"><i class="fa fa-stack-2x fa-circle"></i><i class="sidebar__link_item__icon__inner fa fa-stack-1x fa-inverse fa-map-marker"></i></span>
            <div class="sidebar__link_item__name">Address</div>
          </li>
        </ul>
        <div class="sidebar__bottom"> 
          <div onclick="location.href=&apos;http://www.linkedin.com/in/vzaccaria&apos;" style="cursor: pointer" class="sidebar__bottom__button"><i class="fa fa-linkedin-square"></i></div>
          <div onclick="location.href=&apos;http://twitter.com/_vzaccaria_&apos;" style="cursor: pointer" class="sidebar__bottom__button"><i class="fa fa-twitter-square"></i></div>
          <div onclick="location.href=&apos;https://plus.google.com/116322227495215922957/about&apos;" style="cursor: pointer" class="sidebar__bottom__button"><i class="fa fa-google-plus-square"></i></div>
        </div>
      </div>
      <div class="site_container">
        <div class="post_container">
          <div class="post_container__post__title">Soluzioni seconda prova in itinere</div>
          <div class="post_container__post__subtitle"> 
            <div class="post_container__post__date"> <i class="fa fa-calendar-o"> </i>
              <div class="post_container__post__date_value">Thursday, February 5th 2015</div>
            </div>
            <div class="post_container__post__category"> <i class="fa fa-flag-o"> </i>
              <div class="post_container__post__category_value">infob</div>
            </div>
            <div class="post_container__post__tags"> <i class="fa fa-tags"></i>
              <div class="post_container__post__tag">prova in itinere</div>
            </div>
            <div class="share_buttons"> 
              <div class="share_buttons__message">Share: </div>
              <div style="cursor: pointer" class="share_buttons__share_reddit"><i class="fa fa-reddit"> </i></div>
              <div style="cursor: pointer" class="share_buttons__share_twitter"><i class="fa fa-twitter"></i></div>
            </div>
          </div>
          <div class="post_text"><p>In un cinema di Milano la temperatura nella sala è regolata in modo automatico. Un sensore monitora la temperatura rilevando un valore ogni minuto mentre
la caldaia si accende solo quando la temperatura rilevata è inferiore a una certa soglia e si spegne non appena viene raggiunta tale soglia. </p>
<p>I valori letti vengono troncati a due cifre decimali, inseriti in un array <code>temp</code> e salvati in un file dati di Matlab chiamato <code>log.txt</code>.</p>
<p>Un esempio di valori contenuti nel file <code>log.txt</code> è il seguente:</p>
<pre><code>22.00  22.50  23.20  21.45  22.00  22.35  23.00  23.40
</code></pre><h2 id="domanda-1">Domanda 1</h2>
<p>Scrivere in Matlab una funzione <code>calcolaCosto</code> che: </p>
<ul>
<li><p>riceve in ingresso un vettore di temperature <code>temperature</code>, un valore soglia <code>soglia</code> e un parametro <code>costoAlMinuto</code> che indica il costo al minuto del gas consumato dalla caldaia;</p>
</li>
<li><p>restituisca il costo totale <code>costoTotale</code> del gas consumato e un vettore <code>minutiAccesa</code> con i minuti nei quali la caldaia è rimasta accesa. Per il costo totale, tenere anche presente che se il totale dei minuti nei quali la caldaia ha funzionato supera i 30 minuti, allora il costo del gas consumato dalla caldaia va diminuito del 20%.</p>
</li>
</ul>
<p>Ad esempio, nel caso la funzione <code>calcolaCosto</code> riceva in ingresso il valori di temperatura contenuti nel file <code>log.txt</code>, una soglia di temperatura pari a 23.00 e un valore di <code>costoAlMinuto</code> pari a 100, ritornerà un costo totale di 500 e <code>minutiAccesa = [1 2 4 5 6]</code>.   </p>
<h3 id="soluzione-">Soluzione:</h3>
<pre><code class="lang-matlab">function [costoTotale,minutiAccesa] = calcolaCosto(temp, soglia, costoAlMinuto)
    minutiAccesa = find(temp &lt; soglia);
    if (length(minutiAccesa) &gt; 30)
        costoTotale = length(minutiAccesa) * costoAlMinuto * 0.80;
    else
        costoTotale = length(minutiAccesa) * costoAlMinuto;
    end
end
</code></pre>
<h2 id="domanda-2">Domanda 2</h2>
<p>Scrivere  uno script che:</p>
<ul>
<li>definisca il valore della soglia di temperatura (<code>soglia</code>) e il valore del parametro <code>costoAlMinuto</code> richiedendoli all&#39;utente. </li>
<li>Legga dal file <code>log.txt</code> i valori di temperatura contenuti nell’array <code>temp</code>;</li>
<li>disegni il grafico (con titolo del grafico e dei due assi) della temperatura al variare del tempo, evidenziando sul grafico stesso: <em>a)</em> la temperatura soglia con una retta orizzontale nera a doppio spessore; <em>b)</em> i minuti nei quali la caldaia ha funzionato, marcandoli con il simbolo &#39;X&#39; rosso (senza congiungerli).</li>
<li>stampi a video il costo totale del gas consumato e i minuti nei quali la caldaia è rimasta accesa.</li>
</ul>
<h3 id="soluzione-">Soluzione:</h3>
<pre><code class="lang-matlab">load log.mat temp; 
soglia = 25;
costoAlMinuto = 10;
x = 1:size(temp, 2);
figure
hold on
ylabel(&#39;temperatura&#39;);
xlabel(&#39;minuto&#39;);
title(&#39;Temperatura sala&#39;);
plot(x, temp);
y = soglia * ones(size(x));
plot(x, y, &#39;k&#39;, &#39;LineWidth&#39;, 2);
indici = find(temp &lt; soglia);
temp1 = temp(indici);
x1 = x(indici);
plot(x1, temp1, &#39;Xr&#39;);

[costoTotale, minutiAcceso] = calcolaCosto(temp, soglia, costoAlMinuto);

disp([&#39;Costo totale del gas consumato: &#39;, num2str(costoTotale), &#39; Euro.&#39;]);
disp(&#39;La caldaia ha funzionato nei seguenti minuti: &#39;);
disp(minutiAcceso);
</code></pre>
<h1 id="esercizio-2-6-punti-">Esercizio 2 (6 punti)</h1>
<p>Si considerino i seguenti esempi di matrici costruite da &quot;quadrati concentrici&quot;:</p>
<pre><code class="lang-matlab">matr1 = 
     2     2     2     2     2     2
     2     3     3     3     3     2
     2     3     4     4     3     2
     2     3     4     4     3     2
     2     3     3     3     3     2
     2     2     2     2     2     2
</code></pre>
<pre><code class="lang-matlab">matr2 =
     2     2     2     2     2
     2     5     5     5     2
     2     5     1     5     2
     2     5     5     5     2
     2     2     2     2     2
</code></pre>
<p>Come si vede dagli esempi, si tratta di matrici quadrate in cui i valori che si trovano sulla n-esima riga, n-esima colonna, e sulle righe e colonne simmetriche a queste sono uguali tra loro.</p>
<h2 id="domanda-1">Domanda 1</h2>
<p>Si sviluppi in Matlab una funzione ricorsiva <code>quadratiConcentrici</code> che, data una generica matrice, restituisca 1 se la matrice è costituita da quadrati concentrici, 0 altrimenti. </p>
<p>Per sviluppare questa funzione si assuma di avere a disposizione la funzione <code>valoriDiCorniceUguali</code> che, data una matrice quadrata, restituisce 1 se tutti i valori disposti sulla sua cornice esterna (costituita dalla prima e dall’ultima riga e dalla prima e dall’ultima colonna) sono uguali tra loro, 0 altrimenti. Per esempio: <code>valoriDiCorniceUguali(matr1)</code> restituisce 1.</p>
<p>NB: non si chiede di sviluppare valoriDiCorniceUguali. Ci si focalizzi solo sulla funzione ricorsiva.</p>
<h3 id="soluzione-">Soluzione:</h3>
<pre><code class="lang-matlab">function [ris] = quadratiConcentrici(m)
    [r, c] = size(m);
    if r ~= c 
        ris = false;
    else
        if r == 1 || r == 0
            ris = true;
        else
            if valoriDiCorniceUguali(m)
                ris = quadratiConcentrici(m(2:end-1, 2:end-1));
            else 
                ris = false;
            end
        end
    end
end
</code></pre>
<h1 id="esercizio-3">Esercizio 3</h1>
<p>Si considerino due calcolatori aventi le seguenti configurazioni:</p>
<ul>
<li><p><strong>Configurazione A</strong></p>
<ul>
<li><p>1 Mbyte di memoria fisica e pagine di memoria da 4 Kbyte</p>
</li>
<li><p>una memoria cache con hit rate di 0.8, hit time di 50 ns e miss penalty di 150 ns</p>
</li>
</ul>
</li>
<li><p><strong>Configurazione B</strong></p>
<ul>
<li><p>indirizzo di memoria fisica a 24 bit e pagine di memoria da 64 Kbyte</p>
</li>
<li><p>una memoria cache con hit rate di 0.9, hit time di 40 ns e miss penalty di 250 ns</p>
</li>
</ul>
</li>
</ul>
<h2 id="domanda-1">Domanda 1</h2>
<p>Quali dei due dispositivi ha il maggior numero di pagine di memoria fisica? Perchè?</p>
<blockquote>
<p>Nessuno dei due dispositivi; entrambi hanno lo stesso numero di pagine di memoria fisica (2^8), infatti:</p>
<ul>
<li>La configurazione A ha 20 bit di memoria fisica indirizzabile (1 Mbyte = 2^20), e 12 bit di offset (2^12=4K).</li>
<li>La configurazione B ha 24 bit di memoria fisica indirizzabile, di cui 16 dedicati all’offset all’interno della pagina.</li>
</ul>
</blockquote>
<h2 id="domanda-2">Domanda 2</h2>
<p>Quale dei due avrà maggiore memoria virtuale?</p>
<blockquote>
<p>Le informazioni fornite non ci permettono di risalire al numero di pagine virtuali né della configurazione A né della B.</p>
</blockquote>
<h2 id="domanda-3">Domanda 3</h2>
<p>In quale dei due dispositivi l&#39;accesso alla memoria è più rapido?</p>
<blockquote>
<p>La configurazione B è più veloce, infatti:</p>
<ul>
<li>Tempo medio di accesso di A = 0.8 <em> 50 ns + 0.2 </em> 150 ns = 70 ns</li>
<li>Tempo medio di accesso di B = 0.9 <em> 40 ns + 0.1 </em> 250 ns = 61 ns</li>
</ul>
</blockquote>
<h2 id="domanda-4">Domanda 4</h2>
<p>Si consideri ora il dispositivo più lento: qual è l’hit rate minimo che dovrebbe avere per essere rapido almeno quanto l&#39;altro?</p>
<blockquote>
<p>Se hit rate = \(h\), si dovrà avere: </p>
<p>\(h \times 50 + (1-h) \times 150 \leq 61\), ovvero</p>
<p>\(- 100 \times h \leq - 89\), quindi</p>
<p>\(h \geq 0.89\).</p>
</blockquote>
</div>
          <script src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_SVG"></script>
          <div id="disqus_thread" class="post_container__comments"> 
            <script>(function() {
  var disqus_shortname, dsq;

  disqus_shortname = 'vittoriozaccaria';

  dsq = document.createElement('script');

  dsq.type = 'text/javascript';

  dsq.async = true;

  dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';

  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);

}).call(this);

            </script><a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>