<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head lang="en">
    <title>Lezione del 23 Ottobre</title>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta name="description" content="">
    <meta name="keywords" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no,minimal-ui">
    <script type="text/javascript" src="/v2/js/client.js"></script>
  </head>
  <body ng-app="application">
    <div class="site_wrapper">
      <div class="sidebar"> <img class="sidebar__picture">
        <div class="sidebar__name">Vittorio Zaccaria</div>
        <div class="sidebar__address">Politecnico di Milano</div>
        <ul class="sidebar__link_list">
          <li onclick="location.href=&apos;/v2&apos;" style="cursor: pointer" class="sidebar__link_item"><span class="sidebar__link_item__icon fa-stack"><i class="fa fa-stack-2x fa-circle"></i><i class="sidebar__link_item__icon__inner fa fa-stack-1x fa-inverse fa-home"></i></span>
            <div class="sidebar__link_item__name">Home</div>
          </li>
          <li onclick="location.href=&apos;/v2/research.html&apos;" style="cursor: pointer" class="sidebar__link_item"><span class="sidebar__link_item__icon fa-stack"><i class="fa fa-stack-2x fa-circle"></i><i class="sidebar__link_item__icon__inner fa fa-stack-1x fa-inverse fa-flask"></i></span>
            <div class="sidebar__link_item__name">Research</div>
          </li>
          <li onclick="location.href=&apos;/v2/blog.html&apos;" style="cursor: pointer" class="sidebar__link_item"><span class="sidebar__link_item__icon fa-stack"><i class="fa fa-stack-2x fa-circle"></i><i class="sidebar__link_item__icon__inner fa fa-stack-1x fa-inverse fa-quote-left"></i></span>
            <div class="sidebar__link_item__name">Blog</div>
          </li>
          <li onclick="location.href=&apos;/v2/projects.html&apos;" style="cursor: pointer" class="sidebar__link_item"><span class="sidebar__link_item__icon fa-stack"><i class="fa fa-stack-2x fa-circle"></i><i class="sidebar__link_item__icon__inner fa fa-stack-1x fa-inverse fa-floppy-o"></i></span>
            <div class="sidebar__link_item__name">Projects</div>
          </li>
          <li onclick="location.href=&apos;/v2/teaching.html&apos;" style="cursor: pointer" class="sidebar__link_item"><span class="sidebar__link_item__icon fa-stack"><i class="fa fa-stack-2x fa-circle"></i><i class="sidebar__link_item__icon__inner fa fa-stack-1x fa-inverse fa-graduation-cap"></i></span>
            <div class="sidebar__link_item__name">Teaching</div>
          </li>
          <li onclick="location.href=&apos;http://www.vittoriozaccaria.net/deposit/cv.pdf&apos;" style="cursor: pointer" class="sidebar__link_item"><span class="sidebar__link_item__icon fa-stack"><i class="fa fa-stack-2x fa-circle"></i><i class="sidebar__link_item__icon__inner fa fa-stack-1x fa-inverse fa-user"></i></span>
            <div class="sidebar__link_item__name">CV</div>
          </li>
          <li onclick="location.href=&apos;/v2/videos.html&apos;" style="cursor: pointer" class="sidebar__link_item"><span class="sidebar__link_item__icon fa-stack"><i class="fa fa-stack-2x fa-circle"></i><i class="sidebar__link_item__icon__inner fa fa-stack-1x fa-inverse fa-youtube-play"></i></span>
            <div class="sidebar__link_item__name">Videos</div>
          </li>
          <li onclick="location.href=&apos;/v2/address.html&apos;" style="cursor: pointer" class="sidebar__link_item"><span class="sidebar__link_item__icon fa-stack"><i class="fa fa-stack-2x fa-circle"></i><i class="sidebar__link_item__icon__inner fa fa-stack-1x fa-inverse fa-map-marker"></i></span>
            <div class="sidebar__link_item__name">Address</div>
          </li>
        </ul>
        <div class="sidebar__bottom"> 
          <div onclick="location.href=&apos;http://www.linkedin.com/in/vzaccaria&apos;" style="cursor: pointer" class="sidebar__bottom__button"><i class="fa fa-linkedin-square"></i></div>
          <div onclick="location.href=&apos;http://twitter.com/_vzaccaria_&apos;" style="cursor: pointer" class="sidebar__bottom__button"><i class="fa fa-twitter-square"></i></div>
          <div onclick="location.href=&apos;https://plus.google.com/116322227495215922957/about&apos;" style="cursor: pointer" class="sidebar__bottom__button"><i class="fa fa-google-plus-square"></i></div>
        </div>
      </div>
      <div class="site_container">
        <div class="post_container">
          <div class="post_container__post__title">Lezione del 23 Ottobre</div>
          <div class="post_container__post__subtitle"> 
            <div class="post_container__post__date"> <i class="fa fa-calendar-o"> </i>
              <div class="post_container__post__date_value">Wednesday, October 23rd 2013</div>
            </div>
            <div class="post_container__post__category"> <i class="fa fa-flag-o"> </i>
              <div class="post_container__post__category_value">infob</div>
            </div>
            <div class="post_container__post__tags"> <i class="fa fa-tags"></i>
              <div class="post_container__post__tag">lezione</div>
            </div>
            <div class="share_buttons"> 
              <div class="share_buttons__message">Share: </div>
              <div style="cursor: pointer" class="share_buttons__share_reddit"><i class="fa fa-reddit"> </i></div>
              <div style="cursor: pointer" class="share_buttons__share_twitter"><i class="fa fa-twitter"></i></div>
            </div>
          </div>
          <div class="post_text"><h1 id="ricapitolazione">Ricapitolazione</h1>
<p>Oggi abbiamo più che altro risposto alle vostre domande riguardo ai tipi definiti con <code>typedef</code>.</p>
<p>Il costrutto <code>typedef</code> serve, in un certo senso, a estendere il linguaggio C, per gestire categorie più complesse di dato.</p>
<p>Quindi, cosi&#39; come potete utilizzare i tipi nativi del C per definire nuove variabili:</p>
<pre><code>int a;
float b;
char c;
</code></pre><p>una volta definito un nuovo tipo, ad esempio <code>libro</code>:</p>
<pre><code>typedef struct
{
  int anno_pubbl;
  char titolo[30];
} libro;
</code></pre><p>potete dichiararne più variabili:</p>
<pre><code>libro l1;
libro l2;
libro l3;
</code></pre><p>o addirittura una libreria intera di 100 libri:</p>
<pre><code>libro libreria[100];
</code></pre><h2 id="array-e-stringhe">Array e stringhe</h2>
<p>Le stringhe sono degli array di caratteri, con una dimensione massima:</p>
<pre><code>typedef char stringa[5];
</code></pre><p>Possiamo inizializzare una stringa (<code>esempio</code>) in questo modo:</p>
<pre><code>stringa esempio = &quot;ciao&quot;;
</code></pre><p>i valori in memoria saranno i seguenti:</p>
<pre><code>indice nell&#39;array:      0  1  2  3  4
valore dell&#39;elemento:   c  i  a  o  \0
</code></pre><p>Possiamo modificare un elemento della stringa in questo modo:</p>
<pre><code>esempio[0] = &#39;m&#39;;
</code></pre><p>che risulta nel seguente valore di <code>esempio</code>:</p>
<pre><code>indice nell&#39;array:      0  1  2  3  4
valore dell&#39;elemento:   m  i  a  o  \0
</code></pre><p>Possiamo — infine — leggere un carattere dalla stringa in questo modo:</p>
<pre><code>char d;
d = esempio[0];
</code></pre><h1 id="calcolo-delle-vendite-di-ipad-nel-2011-e-2012">Calcolo delle vendite di iPad nel 2011 e 2012</h1>
<p>Questo programma confronta le vendite totali del 2011 e del 2012 di iPad, partendo dai dati contenuti in <code>vendite_2012</code> e <code>vendite_2011</code>.</p>
<p>Notate come ho utilizzato lo stesso tipo per <code>vendite_2011</code> e <code>vendite_2012</code>:</p>
<pre><code>#include &lt;stdio.h&gt;

typedef int ipad_venduti_mese[12];

int main()
{
    int ipad_venduti_in_anno_2011=0;
    int ipad_venduti_in_anno_2012=0;
    int i;

    ipad_venduti_mese vendite_2012 = { 1,1,1,2,3,5,7,9,1,2,7,1};
    ipad_venduti_mese vendite_2011 = { 2,2,2,3,1,2,3,9,9,9,1,2};

    for(i=0; i&lt;12; i++)
    {
        ipad_venduti_in_anno_2011 = ipad_venduti_in_anno_2011 + 
                                    vendite_2011[i];
    }

    for(i=0; i&lt;12; i++)
    {
        ipad_venduti_in_anno_2012 = ipad_venduti_in_anno_2012 + 
                                    vendite_2012[i];
    }
    if( ipad_venduti_in_anno_2011 &gt; ipad_venduti_in_anno_2012)
    {
        printf(&quot;2011 (vendite=%d) meglio del 2012 (vendite=%d)\n&quot;, ipad_venduti_in_anno_2011, ipad_venduti_in_anno_2012);
    }
    else
    {
        printf(&quot;2011 (vendite=%d) peggio del 2012 (vendite=%d)\n&quot;, ipad_venduti_in_anno_2011, ipad_venduti_in_anno_2012);
    }
    return 0;
}
</code></pre><h1 id="calcolo-delle-vendite-input-inserito-dall-utente">Calcolo delle vendite, input inserito dall&#39;utente</h1>
<p>Nell&#39;esercizio successivo abbiamo modificato il programma precedente in modo tale da leggere i dati da tastiera:</p>
<pre><code>#include &lt;stdio.h&gt;

typedef int ipad_venduti_mese[12];

int main()
{
    int ipad_venduti_in_anno_2012=0;
    int i;

    ipad_venduti_mese vendite_2012;

    for(i=0; i&lt;12; i++)
    {
        printf(&quot;Caro utente, inserisci le vendite del mese %d: &quot;, i);
        scanf(&quot;%d&quot;, &amp; vendite_2012[i]);
    }

    for(i=0; i&lt;12; i++)
    {
        ipad_venduti_in_anno_2012 = ipad_venduti_in_anno_2012 + 
                                    vendite_2012[i];
    }
    printf(&quot;Le vendite totali sono: %d\n&quot;, ipad_venduti_in_anno_2012);
    return 0;
}
</code></pre><h1 id="calcolo-del-minimo-e-massimo">Calcolo del minimo e massimo</h1>
<p>Abbiamo poi modificato l&#39;esercizio precedente, richiedendo i dati relativi ad un particolare mese nel caso in cui l&#39;utente inserisca un valore maggiore di 10. Questo significa che i valori accettabili sono da 0 a 10.</p>
<p>Contemporaneamente, abbiamo determinato i valori massimi e minimi contenuti nell&#39;array appena letto:</p>
<pre><code>#include &lt;stdio.h&gt;

typedef int ipad_venduti_mese[12];

ipad_venduti_mese vendite_2012;

int vendite_2012[12];


int main()
{
    int ipad_venduti_in_anno_2012=0;
    int i;
    int max;
    int min;

    ipad_venduti_mese vendite_2012;

    for(i=0; i&lt;12; i++)
    {
        do {
                printf(&quot;Caro utente, inserisci le vendite del mese %d: &quot;, i);
                scanf(&quot;%d&quot;, &amp; vendite_2012[i]);
        } while(vendite_2012[i] &gt; 10);
    }

    max = 0;
    min = 10;
    for(i=0; i&lt;12; i++)
    {
        ipad_venduti_in_anno_2012 = ipad_venduti_in_anno_2012 + 
                                    vendite_2012[i];
        if(vendite_2012[i] &gt; max)
        {
            max = vendite_2012[i];
        }    
        if(vendite_2012[i] &lt; min)
        {
            min = vendite_2012[i];
        }
    }
    printf(&quot;Le vendite totali sono: %d\n&quot;, ipad_venduti_in_anno_2012);
    printf(&quot;il massimo delle vendite è: %d\n&quot;, max);
    printf(&quot;il minimo delle vendite è: %d\n&quot;, min);

    return 0;
}
</code></pre><h1 id="stringhe">Stringhe</h1>
<p>Infine, abbiamo visto come utilizzare le funzioni <code>strlen</code> (calcola lunghezza effettiva stringa) e <code>strcpy</code> (copia stringa):</p>
<pre><code>#include &quot;stdio.h&quot;

typedef char stringa[10];

int main()
{
    stringa s1 = &quot;ciao&quot;;
    stringa s2 = &quot;foo&quot;;
    /*
        c  i  a  o \0  ?  ?  ?  ?  ?
        0  1  2  3  4  5  6  7  8  9 
    */
    printf(&quot;La stringa è lunga %d caratteri\n&quot;, strlen(s1));

    strcpy(s2, s1);

    printf(&quot;La stringa s1 è %s \n&quot;, s1);
    printf(&quot;La stringa s2 è %s \n&quot;, s2);

    return 0;
}
</code></pre><h1 id="dichiarazioni-di-tipo-complesse">Dichiarazioni di tipo complesse</h1>
<p>L&#39;ultimo esempio si è concentrato sulla dichiarazione di tipi complessi (e relative variabili), facendo l&#39;esempio di una base di dati universitaria per studenti di primo e secondo livello:</p>
<pre><code>#include &quot;stdio.h&quot;

typedef char stringa[30];

typedef struct 
{
    int giorno;
    int mese;
    int anno;
} data;

typedef struct 
{
    int codice_insegnamento;
    data data_dell_esame;
    int  voto;
} esame;

typedef struct 
{
    stringa nome;
    stringa matricola;
    data    data_di_nascita;
    esame   esami_sostenuti[19];
} studente;

typedef studente database[1000];
</code></pre><p>Una volta definito il tipo <code>database</code> (che è un array di 1000 <code>studente</code>), posso dichiarare due variabili per le due tipologie di studenti:</p>
<pre><code>database studenti_di_primo_livello;
database studenti_di_secondo_livello;
</code></pre><p>Supponiamo che voglia ricavare la data del primo esame sostenuto dallo studente in undicesima posizione[^1]; per leggere tale data devo specificare il cammino da effettuare per arrivare fino al campo desiderato:</p>
<pre><code>studenti_di_primo_livello[10].esami_sostenuti[0].data_dell_esame
</code></pre><p>Se volessi invece inserire un esame nel database devo prima dichiararlo e inizializzarlo:</p>
<pre><code>esame e;

e.codice_insegnamento = 81639;
e.voto = 29;
e.data = ...;
</code></pre><p>per poi copiarlo nella posizione desiderata, ad esempio sesto esame sostenuto dello studente in posizione 21.</p>
<pre><code>studenti_di_primo_livello[20].esami_sostenuti[5] = e;
</code></pre><p> [^1]:Ricordate che gli indici negli array partono da 0 e non da 1. Quindi posizione undicesima = indice 10. </p>
</div>
          <script src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_SVG"></script>
          <div id="disqus_thread" class="post_container__comments"> 
            <script>(function() {
  var disqus_shortname, dsq;

  disqus_shortname = 'vittoriozaccaria';

  dsq = document.createElement('script');

  dsq.type = 'text/javascript';

  dsq.async = true;

  dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';

  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);

}).call(this);

            </script><a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>