<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head lang="en">
    <title>lezione del 29/1</title>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta name="description" content="">
    <meta name="keywords" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no,minimal-ui">
    <script type="text/javascript" src="/js/client.js"></script>
  </head>
  <body ng-app="application">
    <div class="site_wrapper">
      <div class="sidebar"> <img class="sidebar__picture">
        <div class="sidebar__name">Vittorio Zaccaria</div>
        <div class="sidebar__address">Politecnico di Milano</div>
        <ul class="sidebar__link_list">
          <li onclick="location.href=&apos;&apos;" style="cursor: pointer" class="sidebar__link_item"><span class="sidebar__link_item__icon fa-stack"><i class="fa fa-stack-2x fa-circle"></i><i class="sidebar__link_item__icon__inner fa fa-stack-1x fa-inverse fa-home"></i></span>
            <div class="sidebar__link_item__name">Home</div>
          </li>
          <li onclick="location.href=&apos;/research.html&apos;" style="cursor: pointer" class="sidebar__link_item"><span class="sidebar__link_item__icon fa-stack"><i class="fa fa-stack-2x fa-circle"></i><i class="sidebar__link_item__icon__inner fa fa-stack-1x fa-inverse fa-flask"></i></span>
            <div class="sidebar__link_item__name">Research</div>
          </li>
          <li onclick="location.href=&apos;/blog.html&apos;" style="cursor: pointer" class="sidebar__link_item"><span class="sidebar__link_item__icon fa-stack"><i class="fa fa-stack-2x fa-circle"></i><i class="sidebar__link_item__icon__inner fa fa-stack-1x fa-inverse fa-quote-left"></i></span>
            <div class="sidebar__link_item__name">Blog</div>
          </li>
          <li onclick="location.href=&apos;/projects.html&apos;" style="cursor: pointer" class="sidebar__link_item"><span class="sidebar__link_item__icon fa-stack"><i class="fa fa-stack-2x fa-circle"></i><i class="sidebar__link_item__icon__inner fa fa-stack-1x fa-inverse fa-floppy-o"></i></span>
            <div class="sidebar__link_item__name">Projects</div>
          </li>
          <li onclick="location.href=&apos;/teaching.html&apos;" style="cursor: pointer" class="sidebar__link_item"><span class="sidebar__link_item__icon fa-stack"><i class="fa fa-stack-2x fa-circle"></i><i class="sidebar__link_item__icon__inner fa fa-stack-1x fa-inverse fa-graduation-cap"></i></span>
            <div class="sidebar__link_item__name">Teaching</div>
          </li>
          <li onclick="location.href=&apos;http://www.vittoriozaccaria.net/deposit/cv.pdf&apos;" style="cursor: pointer" class="sidebar__link_item"><span class="sidebar__link_item__icon fa-stack"><i class="fa fa-stack-2x fa-circle"></i><i class="sidebar__link_item__icon__inner fa fa-stack-1x fa-inverse fa-user"></i></span>
            <div class="sidebar__link_item__name">CV</div>
          </li>
          <li onclick="location.href=&apos;/videos.html&apos;" style="cursor: pointer" class="sidebar__link_item"><span class="sidebar__link_item__icon fa-stack"><i class="fa fa-stack-2x fa-circle"></i><i class="sidebar__link_item__icon__inner fa fa-stack-1x fa-inverse fa-youtube-play"></i></span>
            <div class="sidebar__link_item__name">Videos</div>
          </li>
          <li onclick="location.href=&apos;/address.html&apos;" style="cursor: pointer" class="sidebar__link_item"><span class="sidebar__link_item__icon fa-stack"><i class="fa fa-stack-2x fa-circle"></i><i class="sidebar__link_item__icon__inner fa fa-stack-1x fa-inverse fa-map-marker"></i></span>
            <div class="sidebar__link_item__name">Address</div>
          </li>
        </ul>
        <div class="sidebar__bottom"> 
          <div onclick="location.href=&apos;http://www.linkedin.com/in/vzaccaria&apos;" style="cursor: pointer" class="sidebar__bottom__button"><i class="fa fa-linkedin-square"></i></div>
          <div onclick="location.href=&apos;http://twitter.com/_vzaccaria_&apos;" style="cursor: pointer" class="sidebar__bottom__button"><i class="fa fa-twitter-square"></i></div>
          <div onclick="location.href=&apos;https://plus.google.com/116322227495215922957/about&apos;" style="cursor: pointer" class="sidebar__bottom__button"><i class="fa fa-google-plus-square"></i></div>
        </div>
      </div>
      <div class="site_container">
        <div class="post_container">
          <div class="post_container__post__title">lezione del 29/1</div>
          <div class="post_container__post__subtitle"> 
            <div class="post_container__post__date"> <i class="fa fa-calendar-o"> </i>
              <div class="post_container__post__date_value">Wednesday, January 29th 2014</div>
            </div>
            <div class="post_container__post__category"> <i class="fa fa-flag-o"> </i>
              <div class="post_container__post__category_value">infob</div>
            </div>
            <div class="post_container__post__tags"> <i class="fa fa-tags"></i>
              <div class="post_container__post__tag">esame</div>
              <div class="post_container__post__tag">funzioni in matlab</div>
            </div>
            <div class="share_buttons"> 
              <div class="share_buttons__message">Share: </div>
              <div style="cursor: pointer" class="share_buttons__share_reddit"><i class="fa fa-reddit"> </i></div>
              <div style="cursor: pointer" class="share_buttons__share_twitter"><i class="fa fa-twitter"></i></div>
            </div>
          </div>
          <div class="post_text"><p>Ecco di seguito il materiale presentato nella lezione in data 29/1 su Matlab e memorie cache:</p>
<h3 id="esercizio-1">Esercizio 1</h3>
<p>La seguente figura mostra l’andamento del profilo dell’argine di un fiume <code>p(m)</code> in funzione della distanza dalla foce <code>m</code>:</p>
<pre><code>  p(m)
    |                                         /
    |        o_________o                     /
    |       /           \                   /
    |  o___o             \                 /
    |                     \               /
    |                      \             /
    |                       o___________o
    |
    |
    |____________________________________________________
                                                        m
</code></pre><p>Come si nota, l’argine presenta altezze diverse nei vari punti del fiume. Si supponga che il fiume scorra in piano lungo tutto il suo percorso (non ci sono quindi salti di livello). </p>
<p>Si chiede di sviluppare in Matlab/Octave una funzione <code>calcolaRischio</code> che sia in grado di identificare e restituire al chiamante i punti dell’argine a rischio di esondazione in giornata, in base a:</p>
<ol>
<li><p>profilo dell’argine <code>p(m)</code>: vettore contenente l&#39;altezza dell&#39;argine in metri rispetto al fondo del letto del fiume a distanza <code>m</code> dalla foce (nella precedente figura i dati contenuti in <code>p(m)</code>sono cerchiati)</p>
</li>
<li><p>l’altezza attuale <code>a</code> del fiume (in metri) rispetto al fondo del letto del fiume (sempre considerando la distanza dalla foce <code>m</code>).</p>
</li>
<li><p>quanti millimetri <code>mil</code> di pioggia fara&#39; durante la giornata (al massimo).</p>
</li>
</ol>
<p>Ovviamente i punti dell’argine a rischio di esondazione in giornata sono quelli in cui l’altezza dell’argine è minore dell’altezza massima che può raggiungere il fiume.</p>
<ol>
<li><p>Si scriva il codice della funzione <code>calcolaRischio</code>: </p>
<pre><code> function pr = calcolaRischio(p, a, mil)
          pr = find(p &lt;= a + (mil / 1000));
</code></pre></li>
<li><p>Si costruisca uno script che: </p>
<ul>
<li><p>carica da un file ascii <code>profiloArgine.txt</code> (contenente un numero per ogni riga) i dati relativi alle altezze dell’argine del fiume nei vari punti (ovvero <code>p(m)</code>).</p>
</li>
<li><p>chiede all’utente l’altezza attuale del fiume <code>a</code> e la previsione di incremento giornaliero totale di altezza del fiume in base alla pioggia prevista <code>mil</code>.</p>
</li>
<li><p>genera una tabella <code>tab</code> contenente, per ciascun punto in cui puo&#39; avvenire una esondazione, il minuto in cui questa potra&#39; avvenire.</p>
<pre><code>   load(&#39;profiloArgine.txt&#39;);
   a       = input(&#39;Altezza attuale: &#39;);
   mil     = input(&#39;Incremento totale previsto millimetri: &#39;);

   pr      = calcolaRischio(p, a, mil) ;

   tabella = 1000 * 24 * 60 * (p - a) / mil;
   tab     = [ p’ tabella&#39; ];
   tab     = tab(pr, :)
</code></pre></li>
</ul>
</li>
</ol>
<h3 id="esercizio-2">Esercizio 2</h3>
<p>L&#39;esercizio e&#39; composto da due punti; nelle soluzioni non è consentito l’uso della funzione <code>num2str</code> di Matlab/Octave:</p>
<ol>
<li><p>Scrivere la funzione ricorsiva <code>cifra()</code> che riceve come parametri due numeri interi <code>num</code> e <code>k</code> (si supponga che entrambi i numeri siano sempre strettamente positivi). La funzione <code>cifra</code> restituisce la <code>k</code>-esima cifra del numero <code>num</code> a partire da destra.</p>
<p>Esempi:</p>
<ul>
<li><code>cifra(1456, 1)</code> deve restituire 6</li>
<li><code>cifra(5136, 4)</code> deve restituire 5</li>
<li><p><code>cifra(512, 2)</code> deve restituire 1</p>
<pre><code>   function ris = cifra(num, k)
       if k == 1
           ris = mod(num, 10);
       else
           ris = cifra(floor(num/10), k-1);
       end
</code></pre></li>
</ul>
</li>
<li><p>Riscrivere la funzione ricorsiva del punto precedente in modo tale che nel caso in cui <code>k</code> sia maggiore del numero effettivo di cifre che compongono <code>num</code> la funzione restituisca -1.</p>
<pre><code> function ris = cifraConControllo(num, k)
     if (k &gt; 1 &amp;&amp; num &lt; 10)
         ris = -1
     else
         if k == 1
             ris = mod(num, 10);
         else
             ris = cifraConControllo(floor(num/10), k-1);
         end
     end
</code></pre></li>
</ol>
<h3 id="esercizio-3">Esercizio 3</h3>
<p>Un sistema dotato solamente di memoria centrale ha un tempo di accesso ai dati pari a 300 ns. Per poter migliorare il tempo di accesso si decide di aggiungere una memoria cache dalle seguenti caratteristiche:</p>
<ul>
<li>Hit Rate = 60 % </li>
<li>Hit Time = 50 ns</li>
<li>Miss Penalty = 800 ns</li>
</ul>
<p>Rispondere alle seguenti domande (giustificando i risultati ottenuti con gli opportuni calcoli):</p>
<ol>
<li><p>Calcolare il tempo medio di accesso ai dati. </p>
<pre><code>tempo_di_accesso = 0.6 * 50 + 0.4 * 800 = 30 + 320 = 350 ns
</code></pre></li>
<li><p>Qual è il valore minimo che deve avere l’Hit Rate affinché la cache offra un vantaggio in termini di prestazioni (cioè il tempo medio di accesso con la cache sia inferiore a 300 ns)?</p>
<pre><code>x * 50 + (1 - x) * 800  &lt; 300        →
               750 * x  &gt; 500        → 
                     x  &gt; 2/3        →
                     x  &gt; ~ 66% 
</code></pre><p>L&#39;hit rate deve essere maggiore di 66%.</p>
</li>
</ol>
<h3 id="esercizio-4">Esercizio 4</h3>
<p>Un sistema dotato solamente di memoria centrale ha un tempo di accesso ai dati pari a 150 ns. Per poter migliorare il tempo di accesso si decide di aggiungere una memoria cache dalle seguenti caratteristiche:</p>
<ul>
<li>Miss Rate = 20 % </li>
<li>Miss Penalty = 500 ns</li>
<li><p>Hit Time = 100 ns</p>
</li>
<li><p>Calcolare il tempo medio di accesso ai dati. </p>
<pre><code>tempo_di_accesso = (1 - 0.2) * 100 + 0.2 * 500 = 80 + 100 = 180ns
</code></pre></li>
<li><p>Qual è il valore massimo che deve avere l’Hit Time affinché la cache offra un vantaggio in termini di prestazioni (cioè il tempo medio di accesso con la cache sia inferiore a 150 ns)?</p>
<pre><code>(1 - 0.2) * x + 0.2 * 500 &lt; 150     →
                  0.8 * x &lt;  50     →
                        x &lt; 62,5 ns 
</code></pre></li>
</ul>
</div>
          <script src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_SVG"></script>
          <div id="disqus_thread" class="post_container__comments"> 
            <script>(function() {
  var disqus_shortname, dsq;

  disqus_shortname = 'vittoriozaccaria';

  dsq = document.createElement('script');

  dsq.type = 'text/javascript';

  dsq.async = true;

  dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';

  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);

}).call(this);

            </script><a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>