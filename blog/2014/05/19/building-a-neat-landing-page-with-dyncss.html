<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head lang="en">
    <title>Building a neat landing page with DynCSS</title>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta name="description" content="">
    <meta name="keywords" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no,minimal-ui">
    <script type="text/javascript" src="/v2/js/client.js"></script>
  </head>
  <body ng-app="application">
    <div class="site_wrapper">
      <div class="sidebar"> <img class="sidebar__picture">
        <div class="sidebar__name">Vittorio Zaccaria</div>
        <div class="sidebar__address">Politecnico di Milano</div>
        <ul class="sidebar__link_list">
          <li onclick="location.href=&apos;/v2&apos;" style="cursor: pointer" class="sidebar__link_item"><span class="sidebar__link_item__icon fa-stack"><i class="fa fa-stack-2x fa-circle"></i><i class="sidebar__link_item__icon__inner fa fa-stack-1x fa-inverse fa-home"></i></span>
            <div class="sidebar__link_item__name">Home</div>
          </li>
          <li onclick="location.href=&apos;/v2/research.html&apos;" style="cursor: pointer" class="sidebar__link_item"><span class="sidebar__link_item__icon fa-stack"><i class="fa fa-stack-2x fa-circle"></i><i class="sidebar__link_item__icon__inner fa fa-stack-1x fa-inverse fa-flask"></i></span>
            <div class="sidebar__link_item__name">Research</div>
          </li>
          <li onclick="location.href=&apos;/v2/blog.html&apos;" style="cursor: pointer" class="sidebar__link_item"><span class="sidebar__link_item__icon fa-stack"><i class="fa fa-stack-2x fa-circle"></i><i class="sidebar__link_item__icon__inner fa fa-stack-1x fa-inverse fa-quote-left"></i></span>
            <div class="sidebar__link_item__name">Blog</div>
          </li>
          <li onclick="location.href=&apos;/v2/projects.html&apos;" style="cursor: pointer" class="sidebar__link_item"><span class="sidebar__link_item__icon fa-stack"><i class="fa fa-stack-2x fa-circle"></i><i class="sidebar__link_item__icon__inner fa fa-stack-1x fa-inverse fa-floppy-o"></i></span>
            <div class="sidebar__link_item__name">Projects</div>
          </li>
          <li onclick="location.href=&apos;/v2/teaching.html&apos;" style="cursor: pointer" class="sidebar__link_item"><span class="sidebar__link_item__icon fa-stack"><i class="fa fa-stack-2x fa-circle"></i><i class="sidebar__link_item__icon__inner fa fa-stack-1x fa-inverse fa-graduation-cap"></i></span>
            <div class="sidebar__link_item__name">Teaching</div>
          </li>
          <li onclick="location.href=&apos;http://www.vittoriozaccaria.net/deposit/cv.pdf&apos;" style="cursor: pointer" class="sidebar__link_item"><span class="sidebar__link_item__icon fa-stack"><i class="fa fa-stack-2x fa-circle"></i><i class="sidebar__link_item__icon__inner fa fa-stack-1x fa-inverse fa-user"></i></span>
            <div class="sidebar__link_item__name">CV</div>
          </li>
          <li onclick="location.href=&apos;/v2/videos.html&apos;" style="cursor: pointer" class="sidebar__link_item"><span class="sidebar__link_item__icon fa-stack"><i class="fa fa-stack-2x fa-circle"></i><i class="sidebar__link_item__icon__inner fa fa-stack-1x fa-inverse fa-youtube-play"></i></span>
            <div class="sidebar__link_item__name">Videos</div>
          </li>
          <li onclick="location.href=&apos;/v2/address.html&apos;" style="cursor: pointer" class="sidebar__link_item"><span class="sidebar__link_item__icon fa-stack"><i class="fa fa-stack-2x fa-circle"></i><i class="sidebar__link_item__icon__inner fa fa-stack-1x fa-inverse fa-map-marker"></i></span>
            <div class="sidebar__link_item__name">Address</div>
          </li>
        </ul>
        <div class="sidebar__bottom"> 
          <div onclick="location.href=&apos;http://www.linkedin.com/in/vzaccaria&apos;" style="cursor: pointer" class="sidebar__bottom__button"><i class="fa fa-linkedin-square"></i></div>
          <div onclick="location.href=&apos;http://twitter.com/_vzaccaria_&apos;" style="cursor: pointer" class="sidebar__bottom__button"><i class="fa fa-twitter-square"></i></div>
          <div onclick="location.href=&apos;https://plus.google.com/116322227495215922957/about&apos;" style="cursor: pointer" class="sidebar__bottom__button"><i class="fa fa-google-plus-square"></i></div>
        </div>
      </div>
      <div class="site_container">
        <div class="post_container">
          <div class="post_container__post__title">Building a neat landing page with DynCSS</div>
          <div class="post_container__post__subtitle"> 
            <div class="post_container__post__date"> <i class="fa fa-calendar-o"> </i>
              <div class="post_container__post__date_value">Monday, May 19th 2014</div>
            </div>
            <div class="post_container__post__category"> <i class="fa fa-flag-o"> </i>
              <div class="post_container__post__category_value">blog</div>
            </div>
            <div class="post_container__post__tags"> <i class="fa fa-tags"></i>
              <div class="post_container__post__tag">CSS</div>
              <div class="post_container__post__tag">Dynamic</div>
            </div>
            <div class="share_buttons"> 
              <div class="share_buttons__message">Share: </div>
              <div style="cursor: pointer" class="share_buttons__share_reddit"><i class="fa fa-reddit"> </i></div>
              <div style="cursor: pointer" class="share_buttons__share_twitter"><i class="fa fa-twitter"></i></div>
            </div>
          </div>
          <div class="post_text"><p><a href="http://www.vittoriozaccaria.net/dyn-css/">DynCSS</a> is a small Javascript add-on for your web pages. It parses your CSS  and converts all the rules with prefix <code>-dyn-*</code> into dynamic Javascript that is executed on browser&#39;s events like <code>scroll</code> and <code>resize</code>. </p>
<p>For example, the following CSS will center vertically <code>.header</code>, dynamically changing <code>margin-top</code> as the window is resized:</p>
<pre><code class="lang-javascript">.header {
 -dyn-margin-top: &#39;(@win-height - @el-height)/2.0&#39;;
}
</code></pre>
<p>The dynamic action is specified with simple quotes, and it can use some placeholders to refer to dynamic properties of the current browser window; in the above example, <code>@win-height</code> is the dynamic height of the window while 
<code>@el-height</code> is the dynamic height of the current element (<code>.header</code> in this case). The overall effect is that, every time the window is resized, the <code>.header</code> will automatically recenter.</p>
<h2 id="the-final-product-of-this-tutorial">The final product of this tutorial</h2>
<p>The final landing page of this tutorial <a href="http://www.vittoriozaccaria.net/dyncss-example/">can be found at this address</a>. As you can see, it contains several effects and animations. I&#39;ll describe in the next paragraphs how I&#39;ve achieved those effects.</p>
<h2 id="a-word-on-responsiveness-">A word on responsiveness.</h2>
<p>DynCSS allows to easily program responsiveness in your CSS. To do so you define a list of breakpoints and the dynamic variable to watch (which is typically the size of the window). You can do this in a <code>&lt;script&gt;</code> tag in your HTML; here&#39;s how you set two breakpoints at 481 and 961 on the window&#39;s width variable <code>@win-width</code>:</p>
<pre><code class="lang-html">&lt;script&gt; 
    window.dynCss.api.setBreakpoints([481,961],&#39;@win-width&#39;);
&lt;/script&gt;
</code></pre>
<p>Now, you can define how each property behaves above an below the breakpoints; for example, we can change dynamically the font size:</p>
<pre><code class="lang-css">.header__title {
        -dyn-font-size: &#39;@selectFrom([&quot;3em&quot;, &quot;4em&quot;, &quot;5em&quot;])&#39;;
}
</code></pre>
<p><code>selectFrom</code> is a built-in function that returns one of the elements of the input list by using the breakpoints specified with <code>setBreakpoints</code>. Here, the font size will be 3em under 480px, 4em under 960px, and 5em above 960px.</p>
<p>For this tutorial we will use only one breakpoint at 480px: </p>
<pre><code class="lang-html">&lt;script&gt; 
    window.dynCss.api.setBreakpoints([481],&#39;@win-width&#39;);
&lt;/script&gt;
</code></pre>
<p>so the <code>@selectFrom</code> will specify in an two element array the value that the property must assume above and below that breakpoint.</p>
<h1 id="landing-page-above-the-fold-">Landing page above the fold.</h1>
<p>As you &#39;land&#39; to the page you will see:</p>
<ul>
<li>a centered header.</li>
<li>a phone positioned on the bottom right.</li>
<li>a chevron-like arrow pointing to the phone.</li>
<li>a set of 4 scroll spies positioned vertically on the left</li>
</ul>
<p><img src="http://www.vittoriozaccaria.net/deposit/landing.png" alt=""></p>
<p>Let&#39;s examine the behavior of these elements.</p>
<h2 id="the-header">The header</h2>
<p>To center the header in the page we specify how the margins should be computed given the size of the header itself:</p>
<pre><code class="lang-css">.content__page1 {
    -dyn-margin-top    : &#39;(@win-height - @el-height)/2.0&#39;;
    -dyn-margin-bottom : &#39;(@win-height - @el-height)/2.0&#39;;
    -dyn-margin-left   : &#39;(@win-width - @el-width)/2.0&#39;;
    }
</code></pre>
<p>If you scroll down the page, you will see that the header will fade; this is achieved with this rule that acts dynamically on the opacity:</p>
<pre><code class="lang-css">.content__page1 {
      -dyn-opacity: &#39;@convergeToZero({when : (@win-scrollTop - (@jq-position.top)), isHigherThan : @win-height/2})&#39;;
    }
</code></pre>
<p>Here, <code>@convergeToZero</code> is a built-in function that returns values from 0 to 1, <code>win-scrollTop</code> is the scrolling position and <code>jq-position.top</code> evaluates — with jQuery — the position of the element (implicitly equivalent to .content__page1). When the scrolling position is above the element, the opacity is 1; as the difference between the scrolling top and the element&#39;s top increases, the opacity is turned gradually down and will be set to zero when the difference is above half of the window&#39;s height.</p>
<h2 id="the-phone">The phone</h2>
<p>The phone image will undergo several transformations; first its vertical position is going to change linearly from <code>@win-height</code>+100 to the vertical center of the window as the scroll top moves from zero to the top of the second page. </p>
<p><img src="http://www.vittoriozaccaria.net/deposit/phone1.png" alt=""></p>
<p>To do that, we set the element&#39;s position to fixed and we use the virtual property <code>fixed-vertical-center</code> that is translated dynamically into changes to the <code>top</code> and <code>left</code> properties of the element: </p>
<pre><code class="lang-css">.phone-preview__phone {

  position: fixed;

  -dyn-fixed-vertical-center: &#39;@morph(@transitionToOne({when : @win-scrollTop , start: 0 , stop: @pos(&quot;.content__page2&quot;).top }, .5) , @win-height + 100 , @fixedVerticalCenter(window))&#39;;

}
</code></pre>
<p>You can see above three additional built-in functions:</p>
<ul>
<li><code>@pos(element)</code> evaluates the absolute position of <code>.content__page2</code> in the document.</li>
<li><code>@transitionToOne({when, start, stop})</code>, signals when the scroll top has reached the top of <code>.content__page2</code></li>
<li><code>@morph(c, v1, v2)</code> returns a convex combination of v1 and v2 by using the value of <code>c</code>.</li>
</ul>
<p>The overall effect is an animation controlled with the scrolling position.</p>
<p>Other animations of the same phone are done by manipulating its horizontal center, its opacity and its css rotation transform: </p>
<pre><code class="lang-css">.phone-preview__phone {

  -dyn-fixed-horizontal-center: &#39;@morph(@transitionToOne({when : @win-scrollTop , start: 0, stop: @pos(&quot;.content__page2&quot;).top }, .5) , @win-width*3/4    , @fixedHorizontalCenter(window))&#39;;

  -dyn-transform: &#39;&quot;rotate(#{@morph(@transitionToOne({when : @win-scrollTop , start: @pos(&quot;.content__page2&quot;).top + @win-height * .1 , stop: @pos(&quot;.content__page3&quot;).top }, 1), 0, 270)}deg) &quot;&#39;;

  -dyn-opacity: &#39;1-@transitionToOne({when : @win-scrollTop , start: @pos(&quot;.content__page3&quot;).top + @win-height * .1 , stop: @pos(&quot;.content__page4&quot;).top - @win-height/2 }, 1)&#39;;
}
</code></pre>
<p>Here&#39;s a snapshot of when the transform animation has kicked in:</p>
<p><img src="http://www.vittoriozaccaria.net/deposit/phone2.png" alt=""></p>
<p>We also manipulate its <code>display</code> property to make it disappear when the scroll position reaches the fourth page:</p>
<pre><code class="lang-css">.phone-preview__phone {

  position: fixed;

  -dyn-display: &#39;@if(@transitionToOne({when : @win-scrollTop , start: @pos(&quot;.content__page3&quot;).top + @win-height * .1 , stop: @pos(&quot;.content__page4&quot;).top - @win-height/2 }, 1) &lt; 0.9, &quot;&quot;, &quot;none&quot;)&#39;;

}
</code></pre>
<p>here <code>@if(c, v1, v2)</code> returns <code>v1</code> if <code>c</code> is true, <code>v2</code> otherwise. The effect is that the phone will disappear when the scroll top reaches a bit less than the top of the fourth page.</p>
<h2 id="the-chevron-arrow">The chevron arrow</h2>
<p>The chevron arrow is positioned very simply by setting its bottom edge to the top edge of the phone and by aligning its horizontal center with the one of the phone:</p>
<p><img src="http://www.vittoriozaccaria.net/deposit/chevron.png" alt=""></p>
<p>You can also note that we disable it when the window size is less than the breakpoint that has been set at the beginning (<code>-dyn-display</code> property):</p>
<pre><code class="lang-css">.phone-preview__chevron {

  position: fixed;
  -dyn-fixed-bottom-edge: &#39;@fixedTopEdge(&quot;.phone-preview__phone&quot;)&#39;;
  -dyn-fixed-horizontal-center: &#39;@fixedHorizontalCenter(&quot;.phone-preview__phone&quot;)&#39;;
  -dyn-display: &#39;@selectFrom([&quot;none&quot;, &quot;block&quot;])&#39;;
}
</code></pre>
<h2 id="the-scroll-spy">The scroll spy</h2>
<p>The scroll spy on the left appears only on desktop browsers: </p>
<pre><code class="lang-css">.position-spy {
  position: fixed;
  -dyn-display: &#39;@selectFrom([&quot;none&quot;, &quot;block&quot;])&#39;;
}
</code></pre>
<p>and its center is positioned at 1/6 of the window width and 1/2 of the window height:</p>
<pre><code class="lang-css">.position-spy {
  -dyn-fixed-vertical-center: &#39;@fixedVerticalCenter(window)&#39;;
  -dyn-fixed-horizontal-center: &#39;@win-width/6&#39;;
}
</code></pre>
<p>Each of the inner spies can be extended with an <code>.highlight</code> class that introduces a white fill into it. </p>
<p><img src="http://www.vittoriozaccaria.net/deposit/spies.png" alt=""></p>
<p>Setting of the <code>.highlight</code> class based on the scroll position is very simple using DynCSS <code>-dyn-set-state-(class)</code> virtual property.</p>
<p>This rule, for example, adds the <code>.highlight</code> class to <code>.position-spy__page1</code> only when the scroll position is within 90% of the first page: </p>
<pre><code class="lang-css">.position-spy__page1 {
  -dyn-set-state-highlight: &#39;@if(@transitionToOne({when : @win-scrollTop , start: 0, stop: @pos(&quot;.content__page2&quot;).top }, .5) &lt; 0.9, true, false)&#39;;
}
</code></pre>
<h1 id="using-a-preprocessor">Using a preprocessor</h1>
<p>By sprucing up a little bit the CSS I&#39;ve been able to build this neat landing page with low effort. Using a CSS preprocessor you can even make it easier to realize complex and responsive pages. For example, using Less&#39;s interpolation you can write comfortably complex animations:</p>
<pre><code class="lang-css">@page2-start:           &#39;@pos(&quot;.content__page2&quot;).top&#39;;
@trans1-limits:         &#39;start: 0, stop: @{page2-start}&#39;;
@animationStatus1:      &#39;@transitionToOne({when : @win-scrollTop , @{trans1-limits} }&#39;;
@convergeHorizontally:  &#39;@morph(@{animationStatus1} , @win-width*3/4, @fixedHorizontalCenter( window ))&#39;;

.phone-preview__phone {
  -dyn-fixed-horizontal-center : &#39;@{convergeHorizontally}&#39;;
}
</code></pre>
<h1 id="wrapping-up">Wrapping up</h1>
<p>DynCSS was born with the intention of make it easier to specify complex animations that go beyond to what it is/will be possible with CSS&#39;s <code>calc</code>. Although it is in its early infancy, I find it already very comfortable to use and I am looking forward for pull requests to the repository!</p>
</div>
          <script src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_SVG"></script>
          <div id="disqus_thread" class="post_container__comments"> 
            <script>(function() {
  var disqus_shortname, dsq;

  disqus_shortname = 'vittoriozaccaria';

  dsq = document.createElement('script');

  dsq.type = 'text/javascript';

  dsq.async = true;

  dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';

  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);

}).call(this);

            </script><a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>